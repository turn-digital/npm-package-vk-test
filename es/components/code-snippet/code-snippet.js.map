{"version":3,"file":"code-snippet.js","names":["styleMap","LitElement","html","property","ChevronDown16","prefix","FocusMixin","CODE_SNIPPET_COLOR_SCHEME","CODE_SNIPPET_TYPE","styles","carbonElement","customElement","observeResize","observer","elem","observe","release","unobserve","CDSCodeSnippet","_decorate","_initialize","_FocusMixin","constructor","args","F","d","kind","key","value","_handleCopyClick","ownerDocument","doc","selection","defaultView","getSelection","removeAllRanges","code","createElement","className","pre","text","Array","from","childNodes","filter","node","nodeType","Node","TEXT_NODE","textContent","copyText","appendChild","body","range","createRange","selectNodeContents","addRange","execCommand","removeChild","_getCodeRefDimensions","ref","clientWidth","codeClientWidth","scrollLeft","codeScrollLeft","scrollWidth","codeScrollWidth","horizontalOverflow","_handleScroll","_this$shadowRoot","codeContainerRef","shadowRoot","querySelector","codeContentRef","type","INLINE","SINGLE","MULTI","_hasLeftOverflow","_hasRightOverflow","requestUpdate","_handleClickExpanded","_expandedCode","ResizeObserver","_this$shadowRoot2","maxCollapsedNumberOfRows","maxExpandedNumberOfRows","minExpandedNumberOfRows","_rowHeightInPixels","rowHeightInPixels","handleScroll","height","getBoundingClientRect","_shouldShowMoreLessBtn","decorators","attribute","Boolean","reflect","Number","connectedCallback","_get","_getPrototypeOf","prototype","call","_hObserveResize","_resizeObserver","disconnectedCallback","updated","setAttribute","removeAttribute","render","disabled","feedback","feedbackTimeout","hideCopyButton","minCollapsedNumberOfRows","wrapText","tooltipContent","showMoreText","showLessText","expandedCode","handleCopyClick","hasRightOverflow","hasLeftOverflow","shouldShowMoreLessBtn","classes","expandButtonClass","disabledCopyButtonClasses","expandCodeBtnText","_t","_","_t2","_t3","_t4","_t5","_t6","class","name","role","slot","static","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/code-snippet/code-snippet.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport ChevronDown16 from '@carbon/icons/lib/chevron--down/16';\nimport { prefix } from '../../globals/settings';\nimport FocusMixin from '../../globals/mixins/focus';\nimport { CODE_SNIPPET_COLOR_SCHEME, CODE_SNIPPET_TYPE } from './defs';\nimport styles from './code-snippet.scss';\nimport Handle from '../../globals/internal/handle';\nimport '../copy-button/index';\nimport '../copy/copy';\nimport '../button/button';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { CODE_SNIPPET_COLOR_SCHEME, CODE_SNIPPET_TYPE };\n\n/**\n * Observes resize of the given element with the given resize observer.\n *\n * @param observer The resize observer.\n * @param elem The element to observe the resize.\n */\nconst observeResize = (observer: ResizeObserver, elem: Element) => {\n  if (!elem) {\n    return null;\n  }\n  observer.observe(elem);\n  return {\n    release() {\n      observer.unobserve(elem);\n      return null;\n    },\n  } as Handle;\n};\n\n/**\n * Basic code snippet.\n *\n * @element cds-code-snippet\n */\n@customElement(`${prefix}-code-snippet`)\nclass CDSCodeSnippet extends FocusMixin(LitElement) {\n  /**\n   * `true` to expand multi-line variant of code snippet.\n   */\n  private _expandedCode = false;\n\n  /**\n   * The handle for observing resize of the parent element of this element.\n   */\n  private _hObserveResize: Handle | null = null;\n\n  /**\n   * Row height in pixels\n   */\n  private _rowHeightInPixels = 16;\n\n  /**\n   * `true` if code-snippet has right overflow\n   */\n  private _hasRightOverflow = true;\n\n  /**\n   * `true` if code-snippet has left overflow\n   */\n  private _hasLeftOverflow = false;\n\n  /**\n   * `true` if show more or show less btn is visible\n   */\n  private _shouldShowMoreLessBtn = false;\n\n  /**\n   * Handles `click` event on the copy button.\n   */\n  private _handleCopyClick() {\n    const { ownerDocument: doc } = this;\n    const selection = doc!.defaultView!.getSelection();\n    selection!.removeAllRanges();\n    const code = doc!.createElement('code');\n    code.className = `${prefix}--visually-hidden`;\n    const pre = doc!.createElement('pre');\n    const text = Array.from(this.childNodes).filter(\n      (node) => node.nodeType === Node.TEXT_NODE\n    );\n    pre.textContent = this.copyText || text[0].textContent;\n    code.appendChild(pre);\n    // Using `<code>` in shadow DOM seems to lose the LFs in some browsers\n    doc!.body.appendChild(code);\n    const range = doc!.createRange();\n    range.selectNodeContents(code);\n    selection!.addRange(range);\n    doc!.execCommand('copy');\n    doc!.body.removeChild(code);\n    selection!.removeAllRanges();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _getCodeRefDimensions(ref) {\n    const {\n      clientWidth: codeClientWidth,\n      scrollLeft: codeScrollLeft,\n      scrollWidth: codeScrollWidth,\n    } = ref;\n\n    return {\n      horizontalOverflow: codeScrollWidth > codeClientWidth,\n      codeClientWidth,\n      codeScrollWidth,\n      codeScrollLeft,\n    };\n  }\n  /**\n   * Handles `scroll` event.\n   */\n  private _handleScroll() {\n    if (this) {\n      const codeContainerRef = this?.shadowRoot?.querySelector(\n        `.${prefix}--snippet-container`\n      );\n      const codeContentRef = codeContainerRef?.querySelector('pre');\n      if (\n        this.type === CODE_SNIPPET_TYPE.INLINE ||\n        (this.type === CODE_SNIPPET_TYPE.SINGLE && !codeContainerRef) ||\n        (this.type === CODE_SNIPPET_TYPE.MULTI && !codeContentRef)\n      ) {\n        return;\n      }\n\n      const {\n        horizontalOverflow,\n        codeClientWidth,\n        codeScrollWidth,\n        codeScrollLeft,\n      } =\n        this.type === CODE_SNIPPET_TYPE.SINGLE\n          ? this._getCodeRefDimensions(codeContainerRef)\n          : this._getCodeRefDimensions(codeContentRef);\n\n      this._hasLeftOverflow = horizontalOverflow && !!codeScrollLeft;\n      this._hasRightOverflow =\n        horizontalOverflow &&\n        codeScrollLeft + codeClientWidth !== codeScrollWidth;\n      this.requestUpdate();\n    }\n  }\n\n  /**\n   * Handles `click` event on the show more or show less button.\n   */\n  private _handleClickExpanded() {\n    this._expandedCode = !this._expandedCode;\n    this.requestUpdate();\n  }\n\n  /**\n   * The `ResizeObserver` instance for observing element resizes for re-positioning floating menu position.\n   */\n  // TODO: Wait for `.d.ts` update to support `ResizeObserver`\n  // @ts-ignore\n  private _resizeObserver = new ResizeObserver(() => {\n    const codeContainerRef = this.shadowRoot?.querySelector(\n      `.${prefix}--snippet-container`\n    );\n    const codeContentRef = codeContainerRef?.querySelector('code'); // PRE?\n    const {\n      type,\n      maxCollapsedNumberOfRows,\n      maxExpandedNumberOfRows,\n      minExpandedNumberOfRows,\n      _rowHeightInPixels: rowHeightInPixels,\n      _handleScroll: handleScroll,\n    } = this;\n    if (codeContentRef && type === CODE_SNIPPET_TYPE.MULTI) {\n      const { height } = codeContentRef.getBoundingClientRect();\n      if (\n        maxCollapsedNumberOfRows > 0 &&\n        (maxExpandedNumberOfRows <= 0 ||\n          maxExpandedNumberOfRows > maxCollapsedNumberOfRows) &&\n        height > maxCollapsedNumberOfRows * rowHeightInPixels\n      ) {\n        this._shouldShowMoreLessBtn = true;\n      } else {\n        this._shouldShowMoreLessBtn = false;\n      }\n      if (\n        this._expandedCode &&\n        minExpandedNumberOfRows > 0 &&\n        height <= minExpandedNumberOfRows * rowHeightInPixels\n      ) {\n        this._expandedCode = false;\n      }\n    }\n    if (\n      (codeContentRef && type === CODE_SNIPPET_TYPE.MULTI) ||\n      (codeContainerRef && type === CODE_SNIPPET_TYPE.SINGLE)\n    ) {\n      handleScroll();\n    }\n    this.requestUpdate();\n  });\n\n  /**\n   * Optional text to copy. If not specified, the `children` node's `innerText`\n   * will be used as the copy value.\n   */\n  @property({ attribute: 'copy-text' })\n  copyText = '';\n\n  /**\n   * `true` if the button should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * Specify the string displayed when the snippet is copied\n   */\n  @property()\n  feedback = 'Copied!';\n\n  /**\n   * Specify the time it takes for the feedback message to timeout\n   */\n  @property({ type: Number, attribute: 'feedback-timeout' })\n  feedbackTimeout = 2000;\n\n  /**\n   * Specify whether or not a copy button should be used/rendered.\n   */\n  @property({ type: Boolean, reflect: true, attribute: 'hide-copy-button' })\n  hideCopyButton = false;\n\n  /**\n   * Specify the maximum number of rows to be shown when in collapsed view\n   */\n  @property()\n  maxCollapsedNumberOfRows = 15;\n\n  /**\n   * Specify the maximum number of rows to be shown when in expanded view\n   */\n  @property()\n  maxExpandedNumberOfRows = 0;\n\n  /**\n   * Specify the minimum number of rows to be shown when in collapsed view\n   */\n  @property()\n  minCollapsedNumberOfRows = 3;\n\n  /**\n   * Specify the minimum number of rows to be shown when in expanded view\n   */\n  @property()\n  minExpandedNumberOfRows = 16;\n\n  /**\n   * Specify a string that is displayed when the Code Snippet has been\n   * interacted with to show less lines\n   */\n  @property({ attribute: 'show-less-text' })\n  showLessText = 'Show less';\n\n  /**\n   * Specify a string that is displayed when the Code Snippet text is more\n   * than 15 lines\n   */\n  @property({ attribute: 'show-more-text' })\n  showMoreText = 'Show more';\n\n  /**\n   * Tooltip content for the copy button.\n   */\n  @property({ attribute: 'tooltip-content' })\n  tooltipContent = 'Copy to clipboard';\n\n  /**\n   * `true` if the button should be disabled.\n   */\n  @property({ type: Boolean, reflect: true, attribute: 'wrap-text' })\n  wrapText = false;\n\n  /**\n   * The type of code snippet.\n   */\n  @property({ reflect: true })\n  type = CODE_SNIPPET_TYPE.SINGLE;\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this._hObserveResize) {\n      this._hObserveResize = this._hObserveResize.release();\n    }\n    this._hObserveResize = observeResize(this._resizeObserver, this);\n  }\n\n  disconnectedCallback() {\n    if (this._hObserveResize) {\n      this._hObserveResize = this._hObserveResize.release();\n    }\n  }\n\n  updated() {\n    if (this._expandedCode) {\n      this.setAttribute('expanded-code', '');\n    } else {\n      this.removeAttribute('expanded-code');\n    }\n  }\n\n  render() {\n    const {\n      disabled,\n      feedback,\n      feedbackTimeout,\n      hideCopyButton,\n      maxExpandedNumberOfRows,\n      minExpandedNumberOfRows,\n      maxCollapsedNumberOfRows,\n      minCollapsedNumberOfRows,\n      type,\n      wrapText,\n      tooltipContent,\n      showMoreText,\n      showLessText,\n      _expandedCode: expandedCode,\n      _handleCopyClick: handleCopyClick,\n      _handleScroll: handleScroll,\n      _hasRightOverflow: hasRightOverflow,\n      _hasLeftOverflow: hasLeftOverflow,\n      _rowHeightInPixels: rowHeightInPixels,\n      _shouldShowMoreLessBtn: shouldShowMoreLessBtn,\n    } = this;\n\n    let classes = `${prefix}--snippet`;\n    type ? (classes += ` ${prefix}--snippet--${type}`) : '';\n    type !== 'inline' && disabled\n      ? (classes += ` ${prefix}--snippet--disabled`)\n      : '';\n    hideCopyButton ? (classes += ` ${prefix}--snippet--no-copy`) : '';\n    wrapText ? (classes += ` ${prefix}--snippet--wraptext`) : '';\n    type == 'multi' && hasRightOverflow\n      ? (classes += ` ${prefix}--snippet--has-right-overflow`)\n      : '';\n\n    const expandButtonClass = `${prefix}--snippet-btn--expand`;\n\n    const disabledCopyButtonClasses = disabled\n      ? `${prefix}--snippet--disabled`\n      : '';\n\n    const expandCodeBtnText = expandedCode ? showLessText : showMoreText;\n\n    if (type === CODE_SNIPPET_TYPE.INLINE) {\n      // Ensures no extra whitespace text node\n      // prettier-ignore\n      return html`\n        <cds-copy button-class-name=\"${classes}\" @click=\"${handleCopyClick}\">\n          <code slot=\"icon\"><slot></slot></code>\n          <span slot=\"tooltip-content\">${tooltipContent}</span>\n        </cds-copy>\n      `;\n    }\n\n    const styles = {};\n    if (type === 'multi') {\n      if (expandedCode) {\n        if (maxExpandedNumberOfRows > 0) {\n          styles['max-height'] =\n            maxExpandedNumberOfRows * rowHeightInPixels + 'px';\n        }\n        if (minExpandedNumberOfRows > 0) {\n          styles['min-height'] =\n            minExpandedNumberOfRows * rowHeightInPixels + 'px';\n        }\n      } else {\n        if (maxCollapsedNumberOfRows > 0) {\n          styles['max-height'] =\n            maxCollapsedNumberOfRows * rowHeightInPixels + 'px';\n        }\n        if (minCollapsedNumberOfRows > 0) {\n          styles['min-height'] =\n            minCollapsedNumberOfRows * rowHeightInPixels + 'px';\n        }\n      }\n    }\n\n    return html`\n      <div\n        role=\"${type === CODE_SNIPPET_TYPE.SINGLE ||\n        type === CODE_SNIPPET_TYPE.MULTI\n          ? 'textbox'\n          : null}\"\n        tabindex=\"${(type === CODE_SNIPPET_TYPE.SINGLE ||\n          type === CODE_SNIPPET_TYPE.MULTI) &&\n        !disabled\n          ? 0\n          : null}\"\n        class=\"${prefix}--snippet-container\"\n        aria-label=\"${'code-snippet'}\"\n        aria-readonly=\"${type === CODE_SNIPPET_TYPE.SINGLE ||\n        type === CODE_SNIPPET_TYPE.MULTI\n          ? true\n          : null}\"\n        aria-multiline=\"${type === CODE_SNIPPET_TYPE.MULTI ? true : null}\"\n        @scroll=\"${(type === CODE_SNIPPET_TYPE.SINGLE && handleScroll) || null}\"\n        style=${styleMap(styles)}>\n        <pre\n          @scroll=\"${(type === CODE_SNIPPET_TYPE.MULTI && handleScroll) ||\n          null}\"><code><slot></slot></code></pre>\n      </div>\n\n      ${hasLeftOverflow\n        ? html`\n            <div class=\"${prefix}--snippet__overflow-indicator--left\"></div>\n          `\n        : ``}\n      ${hasRightOverflow && type !== CODE_SNIPPET_TYPE.MULTI\n        ? html`\n            <div class=\"${prefix}--snippet__overflow-indicator--right\"></div>\n          `\n        : ``}\n      ${hideCopyButton\n        ? ``\n        : html`\n            <cds-copy-button\n              ?disabled=${disabled}\n              button-class-name=${disabledCopyButtonClasses}\n              feedback=${feedback}\n              feedback-timeout=${feedbackTimeout}\n              @click=\"${handleCopyClick}\">\n              ${tooltipContent}\n            </cds-copy-button>\n          `}\n      ${shouldShowMoreLessBtn\n        ? html`\n            <cds-button\n              kind=\"ghost\"\n              size=\"sm\"\n              button-class-name=${expandButtonClass}\n              ?disabled=${disabled}\n              @click=${() => this._handleClickExpanded()}>\n              <span class=\"${prefix}--snippet-btn--text\">\n                ${expandCodeBtnText}\n              </span>\n              ${ChevronDown16({\n                class: `${prefix}--icon-chevron--down ${prefix}--snippet__icon`,\n                name: 'cheveron--down',\n                role: 'img',\n                slot: 'icon',\n              })}\n            </cds-button>\n          `\n        : ``}\n    `;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n\nexport default CDSCodeSnippet;\n"],"mappings":"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"}