{"version":3,"file":"structured-list-row.js","names":["LitElement","html","property","query","ifDefined","CheckmarkFilled16","prefix","HostListener","HostListenerMixin","RadioGroupManager","NAVIGATION_DIRECTION","styles","carbonElement","customElement","navigationDirectionForKey","ArrowUp","BACKWARD","Up","ArrowDown","FORWARD","Down","StructuredListRowRadioButtonDelegate","constructor","row","_row","checked","selected","tabIndex","name","selectionName","compareDocumentPosition","other","focus","CDSStructuredListRow","_decorate","_initialize","_HostListenerMixin","args","F","d","kind","key","value","decorators","_inputNode","inputNode","_manager","select","_radioButtonDelegate","event","manager","navigationDirection","navigate","type","Boolean","reflect","attribute","connectedCallback","hasAttribute","setAttribute","_get","_getPrototypeOf","prototype","call","get","getRootNode","composed","_this$_manager","add","disconnectedCallback","delete","updated","changedProperties","has","shouldBeFocusable","render","selectionValue","selectionIconTitle","_t","_","class","title","_t2","static"],"sources":["components/structured-list/structured-list-row.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport CheckmarkFilled16 from '@carbon/icons/lib/checkmark--filled/16';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport RadioGroupManager, {\n  NAVIGATION_DIRECTION,\n  ManagedRadioButtonDelegate,\n} from '../../globals/internal/radio-group-manager';\nimport styles from './structured-list.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Map of navigation direction by key.\n */\nconst navigationDirectionForKey = {\n  ArrowUp: NAVIGATION_DIRECTION.BACKWARD,\n  Up: NAVIGATION_DIRECTION.BACKWARD, // IE\n  ArrowDown: NAVIGATION_DIRECTION.FORWARD,\n  Down: NAVIGATION_DIRECTION.FORWARD, // IE\n};\n\n/**\n * The interface for `RadioGroupManager` for structured list row.\n */\nclass StructuredListRowRadioButtonDelegate\n  implements ManagedRadioButtonDelegate\n{\n  /**\n   * The structured list row to target.\n   */\n  private _row: CDSStructuredListRow;\n\n  constructor(row: CDSStructuredListRow) {\n    this._row = row;\n  }\n\n  get checked() {\n    return this._row.selected;\n  }\n\n  set checked(checked) {\n    this._row.selected = checked;\n    this._row.tabIndex = checked ? 0 : -1;\n  }\n\n  get tabIndex() {\n    return this._row.tabIndex;\n  }\n\n  set tabIndex(tabIndex) {\n    this._row.tabIndex = tabIndex;\n  }\n\n  get name() {\n    return this._row.selectionName;\n  }\n\n  compareDocumentPosition(other: StructuredListRowRadioButtonDelegate) {\n    return this._row.compareDocumentPosition(other._row);\n  }\n\n  focus() {\n    this._row.focus();\n  }\n}\n\n/**\n * Structured list row.\n *\n * @element cds-structured-list-row\n */\n@customElement(`${prefix}-structured-list-row`)\nclass CDSStructuredListRow extends HostListenerMixin(LitElement) {\n  /**\n   * The radio group manager associated with the radio button.\n   */\n  private _manager: RadioGroupManager | null = null;\n\n  /**\n   * The interface for `RadioGroupManager` for structured list row.\n   */\n  private _radioButtonDelegate = new StructuredListRowRadioButtonDelegate(this);\n\n  /**\n   * The hidden radio button.\n   */\n  @query('#input')\n  private _inputNode!: HTMLInputElement;\n\n  /**\n   * Handles `click` event on this element.\n   */\n  @HostListener('click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = () => {\n    const { _inputNode: inputNode } = this;\n    if (inputNode) {\n      this.selected = true;\n      if (this._manager) {\n        this._manager.select(this._radioButtonDelegate);\n      }\n    }\n  };\n\n  /**\n   * Handles `keydown` event on this element.\n   */\n  @HostListener('keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeydown = (event: KeyboardEvent) => {\n    const { _inputNode: inputNode } = this;\n    const manager = this._manager;\n    if (inputNode && manager) {\n      const navigationDirection = navigationDirectionForKey[event.key];\n      if (navigationDirection) {\n        manager.select(\n          manager.navigate(this._radioButtonDelegate, navigationDirection)\n        );\n      }\n      if (event.key === ' ' || event.key === 'Enter') {\n        manager.select(this._radioButtonDelegate);\n      }\n    }\n  };\n\n  /**\n   * `true` if this structured list row should be selectable and selected.\n   */\n  @property({ type: Boolean, reflect: true })\n  selected = false;\n\n  /**\n   * The `name` attribute for the `<input>` for selection.\n   * If present, this structured list row will be a selectable one.\n   */\n  @property({ attribute: 'selection-name' })\n  selectionName = '';\n\n  /**\n   * The `value` attribute for the `<input>` for selection.\n   */\n  @property({ attribute: 'selection-value' })\n  selectionValue = '';\n\n  /**\n   * The content to put into the `<title>` attribute of the selection icon.\n   */\n  @property({ attribute: 'selection-icon-title' })\n  selectionIconTitle = '';\n\n  connectedCallback() {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'row');\n    }\n    super.connectedCallback();\n    if (!this._manager) {\n      this._manager = RadioGroupManager.get(\n        this.getRootNode({ composed: true }) as Document\n      );\n      const { selectionName } = this;\n      if (selectionName) {\n        this._manager?.add(this._radioButtonDelegate);\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    if (this._manager) {\n      this._manager.delete(this._radioButtonDelegate);\n    }\n    super.disconnectedCallback();\n  }\n\n  updated(changedProperties) {\n    const { _manager: manager, selectionName } = this;\n    if (changedProperties.has('selectionName')) {\n      if (manager) {\n        manager.delete(\n          this._radioButtonDelegate,\n          changedProperties.get('selectionName')\n        );\n        if (selectionName) {\n          manager.add(this._radioButtonDelegate);\n        }\n      }\n      this.setAttribute(\n        'tabindex',\n        !selectionName ||\n          !manager ||\n          !manager.shouldBeFocusable(this._radioButtonDelegate)\n          ? '-1'\n          : '0'\n      );\n    }\n  }\n\n  render() {\n    const { selected, selectionName, selectionValue, selectionIconTitle } =\n      this;\n    if (selectionName) {\n      // \"Selected\" style with `.${prefix}--structured-list-td` does not work somehow - Need investigation\n      return html`\n        <slot></slot>\n        <input\n          id=\"input\"\n          type=\"radio\"\n          class=\"${prefix}--structured-list-input ${prefix}--visually-hidden\"\n          .checked=${selected}\n          name=${selectionName}\n          value=${ifDefined(selectionValue)} />\n        <div\n          class=\"${prefix}--structured-list-td ${prefix}--structured-list-cell\">\n          ${CheckmarkFilled16({\n            class: `${prefix}--structured-list-svg`,\n            title: selectionIconTitle,\n          })}\n        </div>\n      `;\n    }\n    return html` <slot></slot> `;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSStructuredListRow;\n"],"mappings":"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"}