{"version":3,"file":"tag.js","names":["LitElement","html","property","query","Close16","prefix","FocusMixin","HostListener","HostListenerMixin","TAG_SIZE","TAG_TYPE","styles","carbonElement","customElement","CDSTag","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","decorators","key","value","_handleSlugSlotChange","target","hasContent","assignedNodes","filter","elem","matches","undefined","slugItem","length","setAttribute","type","requestUpdate","event","composedPath","indexOf","_buttonNode","disabled","stopPropagation","open","init","bubbles","cancelable","composed","detail","triggeredBy","dispatchEvent","CustomEvent","eventBeforeClose","eventClose","String","reflect","Boolean","MEDIUM","GRAY","render","handleSlugSlotChange","title","_t","_","_t2","static"],"sources":["components/tag/tag.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport Close16 from '@carbon/icons/lib/close/16';\nimport { prefix } from '../../globals/settings';\nimport FocusMixin from '../../globals/mixins/focus';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport { TAG_SIZE, TAG_TYPE } from './defs';\nimport styles from './tag.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { TAG_SIZE, TAG_TYPE };\n\n/**\n * Tag.\n *\n * @fires cds-tag-beingclosed - The custom event fired as the element is being closed\n * @fires cds-tag-closed - The custom event fired after the element has been closed\n */\n@customElement(`${prefix}-tag`)\nclass CDSTag extends HostListenerMixin(FocusMixin(LitElement)) {\n  @query('button')\n  protected _buttonNode!: HTMLButtonElement;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  protected _handleSlugSlotChange({ target }: Event) {\n    const hasContent = (target as HTMLSlotElement)\n      .assignedNodes()\n      .filter((elem) =>\n        (elem as HTMLElement).matches !== undefined\n          ? (elem as HTMLElement).matches(\n              (this.constructor as typeof CDSTag).slugItem\n            )\n          : false\n      );\n    if (hasContent.length > 0) {\n      (hasContent[0] as HTMLElement).setAttribute('tag', `${this.type}`);\n      (hasContent[0] as HTMLElement).setAttribute('size', 'sm');\n      (hasContent[0] as HTMLElement).setAttribute('kind', 'inline');\n    }\n    this.requestUpdate();\n  }\n\n  /**\n   * Handles `click` event on this element.\n   *\n   * @param event The event.\n   */\n  @HostListener('shadowRoot:click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = (event: MouseEvent) => {\n    if (event.composedPath().indexOf(this._buttonNode!) >= 0) {\n      if (this.disabled) {\n        event.stopPropagation();\n      } else if (this.open) {\n        const init = {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: {\n            triggeredBy: event.target,\n          },\n        };\n        if (\n          this.dispatchEvent(\n            new CustomEvent(\n              (this.constructor as typeof CDSTag).eventBeforeClose,\n              init\n            )\n          )\n        ) {\n          this.open = false;\n          this.dispatchEvent(\n            new CustomEvent(\n              (this.constructor as typeof CDSTag).eventClose,\n              init\n            )\n          );\n        }\n      }\n    }\n  };\n\n  /**\n   * Text to show on filter tag \"clear\" buttons. Corresponds to the attribute with the same name\n   */\n  @property({ type: String, reflect: true })\n  title = 'Clear filter';\n\n  /**\n   * `true` if the tag should be disabled\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  @property({ type: Boolean })\n  hasCustomIcon = false;\n\n  /**\n   * Determine if is a filter/chip\n   */\n  @property({ type: Boolean, reflect: true })\n  filter = false;\n\n  /**\n   * `true` if the tag should be open.\n   */\n  @property({ type: Boolean, reflect: true })\n  open = true;\n\n  /**\n   * The size of the tag.\n   */\n  @property({ reflect: true })\n  size = TAG_SIZE.MEDIUM;\n\n  /**\n   * The type of the tag.\n   */\n  @property({ reflect: true })\n  type = TAG_TYPE.GRAY;\n\n  render() {\n    const {\n      disabled,\n      filter,\n      _handleSlugSlotChange: handleSlugSlotChange,\n      title,\n    } = this;\n    return html`\n      <slot name=\"icon\"></slot>\n      <slot></slot>\n      <slot name=\"slug\" @slotchange=\"${handleSlugSlotChange}\"></slot>\n      ${filter\n        ? html`\n            <button class=\"${prefix}--tag__close-icon\" ?disabled=${disabled}>\n              ${Close16({ 'aria-label': title })}\n            </button>\n          `\n        : ``}\n    `;\n  }\n\n  /**\n   * A selector that will return the slug item.\n   */\n  static get slugItem() {\n    return `${prefix}-slug`;\n  }\n\n  /**\n   * The name of the custom event fired before this tag is being closed upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of closing this tag.\n   */\n  static get eventBeforeClose() {\n    return `${prefix}-tag-beingclosed`;\n  }\n\n  /**\n   * The name of the custom event fired after this tag is closed upon a user gesture.\n   */\n  static get eventClose() {\n    return `${prefix}-tag-closed`;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSTag;\n"],"mappings":"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"}