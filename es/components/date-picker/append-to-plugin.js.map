{"version":3,"file":"append-to-plugin.js","names":["config","fp","handlePreCalendarPosition","Promise","resolve","calendarContainer","fpConfig","_positionElement","positionElement","appendTo","top","containerTop","getBoundingClientRect","bottom","refBottom","isRtl","ownerDocument","defaultView","getComputedStyle","getPropertyValue","style","left","right","register","loadedPlugins","push","onReady","onPreCalendarPosition"],"sources":["components/date-picker/append-to-plugin.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Instance as FlatpickrInstance } from 'flatpickr/dist/types/instance';\nimport { Plugin } from 'flatpickr/dist/types/options';\n\n/**\n * The configuration for the Flatpickr plugin to put the calendar dropdown in shadow DOM.\n */\nexport interface DatePickerAppendToPluginConfig {\n  /**\n   * The floating menu container.\n   */\n  appendTo: HTMLElement;\n}\n\n/**\n * @param config Plugin configuration.\n * @returns A Flatpickr plugin to put the calendar dropdown in shadow DOM.\n */\nexport default (config: DatePickerAppendToPluginConfig): Plugin =>\n  (fp: FlatpickrInstance) => {\n    /**\n     * Adjusts the floating meun position after Flatpicker sets it.\n     */\n    const handlePreCalendarPosition = async () => {\n      await Promise.resolve();\n      const {\n        calendarContainer,\n        config: fpConfig,\n        _positionElement: positionElement,\n      } = fp;\n      const { appendTo } = fpConfig;\n      const { top: containerTop } = appendTo!.getBoundingClientRect();\n      const { bottom: refBottom } = positionElement.getBoundingClientRect();\n      const isRtl =\n        appendTo!\n          .ownerDocument!.defaultView!.getComputedStyle(appendTo!)\n          .getPropertyValue('direction') === 'rtl';\n      calendarContainer.style.top = `${refBottom - containerTop}px`;\n      calendarContainer.style.left = !isRtl ? '0' : 'auto';\n      calendarContainer.style.right = !isRtl ? 'auto' : '0';\n    };\n\n    /**\n     * Registers this Flatpickr plugin.\n     *\n     */\n    const register = () => {\n      fp.loadedPlugins.push('carbonFlatpickrAppendToPlugin');\n    };\n\n    return {\n      appendTo: config.appendTo,\n      onReady: register,\n      onPreCalendarPosition: handlePreCalendarPosition,\n    };\n  };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;AACA;AACA;;AAQA;AACA;AACA;AACA;AACA,gBAAgBA,MAAsC,IACnDC,EAAqB,IAAK;EACzB;AACJ;AACA;EACI,MAAMC,yBAAyB,GAAG,MAAAA,CAAA,KAAY;IAC5C,MAAMC,OAAO,CAACC,OAAO,CAAC,CAAC;IACvB,MAAM;MACJC,iBAAiB;MACjBL,MAAM,EAAEM,QAAQ;MAChBC,gBAAgB,EAAEC;IACpB,CAAC,GAAGP,EAAE;IACN,MAAM;MAAEQ;IAAS,CAAC,GAAGH,QAAQ;IAC7B,MAAM;MAAEI,GAAG,EAAEC;IAAa,CAAC,GAAGF,QAAQ,CAAEG,qBAAqB,CAAC,CAAC;IAC/D,MAAM;MAAEC,MAAM,EAAEC;IAAU,CAAC,GAAGN,eAAe,CAACI,qBAAqB,CAAC,CAAC;IACrE,MAAMG,KAAK,GACTN,QAAQ,CACLO,aAAa,CAAEC,WAAW,CAAEC,gBAAgB,CAACT,QAAS,CAAC,CACvDU,gBAAgB,CAAC,WAAW,CAAC,KAAK,KAAK;IAC5Cd,iBAAiB,CAACe,KAAK,CAACV,GAAG,GAAI,GAAEI,SAAS,GAAGH,YAAa,IAAG;IAC7DN,iBAAiB,CAACe,KAAK,CAACC,IAAI,GAAG,CAACN,KAAK,GAAG,GAAG,GAAG,MAAM;IACpDV,iBAAiB,CAACe,KAAK,CAACE,KAAK,GAAG,CAACP,KAAK,GAAG,MAAM,GAAG,GAAG;EACvD,CAAC;;EAED;AACJ;AACA;AACA;EACI,MAAMQ,QAAQ,GAAGA,CAAA,KAAM;IACrBtB,EAAE,CAACuB,aAAa,CAACC,IAAI,CAAC,+BAA+B,CAAC;EACxD,CAAC;EAED,OAAO;IACLhB,QAAQ,EAAET,MAAM,CAACS,QAAQ;IACzBiB,OAAO,EAAEH,QAAQ;IACjBI,qBAAqB,EAAEzB;EACzB,CAAC;AACH,CAAC"}