{"version":3,"file":"css-class-plugin.js","names":["forEach","config","fp","ensureClassesInDatePicker","calendarContainer","selectedDates","classCalendarContainer","classMonth","classWeekdays","classDays","classWeekday","classDay","classNoBorder","selectorFlatpickrMonth","selectorFlatpickrWeekdays","selectorFlatpickrDays","selectorFlatpickrWeekday","selectorFlatpickrDay","classFlatpickrToday","classList","add","month","querySelector","weekdays","days","querySelectorAll","item","innerHTML","replace","contains","length","remove","register","loadedPlugins","push","onMonthChange","onYearChange","onValueUpdate","onOpen","onReady"],"sources":["components/date-picker/css-class-plugin.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Instance as FlatpickrInstance } from 'flatpickr/dist/types/instance';\nimport { Plugin } from 'flatpickr/dist/types/options';\nimport { forEach } from '../../globals/internal/collection-helpers';\n\n/**\n * The configuration for the Flatpickr plugin to set CSS classes specific to this design system.\n */\nexport interface DatePickerCSSClassPluginConfig {\n  /**\n   * The CSS class for the calendar dropdown.\n   */\n  classCalendarContainer: string;\n\n  /**\n   * The CSS class for the month navigator.\n   */\n  classMonth: string;\n\n  /**\n   * The CSS class for the container of the weekdays.\n   */\n  classWeekdays: string;\n\n  /**\n   * The CSS class for the container of the days.\n   */\n  classDays: string;\n\n  /**\n   * The CSS class applied to each weekdays.\n   */\n  classWeekday: string;\n\n  /**\n   * The CSS class applied to each days.\n   */\n  classDay: string;\n\n  /**\n   * The CSS class applied to the \"today\" highlight if there are any dates selected.\n   */\n  classNoBorder: string;\n\n  /**\n   * The CSS selector for Flatpickr's month navigator.\n   */\n  selectorFlatpickrMonth: string;\n\n  /**\n   * The CSS selector for Flatpickr's container of the weekdays.\n   */\n  selectorFlatpickrWeekdays: string;\n\n  /**\n   * The CSS selector for Flatpickr's container of the days.\n   */\n  selectorFlatpickrDays: string;\n\n  /**\n   * The CSS selector applied to Flatpickr's each weekdays.\n   */\n  selectorFlatpickrWeekday: string;\n\n  /**\n   * The CSS selector applied to Flatpickr's each days.\n   */\n  selectorFlatpickrDay: string;\n\n  /**\n   * The CSS class applied to Flatpickr's \"today\" highlight.\n   */\n  classFlatpickrToday: string;\n}\n\n/**\n * @param config Plugin configuration.\n * @returns A Flatpickr plugin to set CSS classes specific to this design system.\n */\nexport default (config: DatePickerCSSClassPluginConfig): Plugin =>\n  (fp: FlatpickrInstance) => {\n    /**\n     * Adds class names specific to our design system to calendar dropdown.\n     */\n    const ensureClassesInDatePicker = () => {\n      const { calendarContainer, selectedDates } = fp;\n      if (calendarContainer) {\n        const {\n          classCalendarContainer,\n          classMonth,\n          classWeekdays,\n          classDays,\n          classWeekday,\n          classDay,\n          classNoBorder,\n          selectorFlatpickrMonth,\n          selectorFlatpickrWeekdays,\n          selectorFlatpickrDays,\n          selectorFlatpickrWeekday,\n          selectorFlatpickrDay,\n          classFlatpickrToday,\n        } = config;\n        calendarContainer.classList.add(classCalendarContainer);\n        const month = calendarContainer.querySelector(selectorFlatpickrMonth);\n        if (month) {\n          month.classList.add(classMonth);\n        }\n        const weekdays = calendarContainer.querySelector(\n          selectorFlatpickrWeekdays\n        );\n        if (weekdays) {\n          weekdays.classList.add(classWeekdays);\n        }\n        const days = calendarContainer.querySelector(selectorFlatpickrDays);\n        if (days) {\n          days.classList.add(classDays);\n        }\n        forEach(\n          calendarContainer.querySelectorAll(selectorFlatpickrWeekday),\n          (item) => {\n            item.innerHTML = item.innerHTML.replace(/\\s+/g, '');\n            item.classList.add(classWeekday);\n          }\n        );\n        forEach(\n          calendarContainer.querySelectorAll(selectorFlatpickrDay),\n          (item) => {\n            item.classList.add(classDay);\n            if (\n              item.classList.contains(classFlatpickrToday) &&\n              selectedDates!.length > 0\n            ) {\n              item.classList.add(classNoBorder);\n            } else if (\n              item.classList.contains(classFlatpickrToday) &&\n              selectedDates!.length === 0\n            ) {\n              item.classList.remove(classNoBorder);\n            }\n          }\n        );\n      }\n    };\n\n    /**\n     * Registers this Flatpickr plugin.\n     */\n    const register = () => {\n      fp.loadedPlugins.push('carbonFlatpickrCSSClassPlugin');\n    };\n\n    return {\n      onMonthChange: ensureClassesInDatePicker,\n      onYearChange: ensureClassesInDatePicker,\n      onValueUpdate: ensureClassesInDatePicker,\n      onOpen: ensureClassesInDatePicker,\n      onReady: [register],\n    };\n  };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA,SAASA,OAAO,QAAQ,2CAA2C;;AAEnE;AACA;AACA;;AAoEA;AACA;AACA;AACA;AACA,gBAAgBC,MAAsC,IACnDC,EAAqB,IAAK;EACzB;AACJ;AACA;EACI,MAAMC,yBAAyB,GAAGA,CAAA,KAAM;IACtC,MAAM;MAAEC,iBAAiB;MAAEC;IAAc,CAAC,GAAGH,EAAE;IAC/C,IAAIE,iBAAiB,EAAE;MACrB,MAAM;QACJE,sBAAsB;QACtBC,UAAU;QACVC,aAAa;QACbC,SAAS;QACTC,YAAY;QACZC,QAAQ;QACRC,aAAa;QACbC,sBAAsB;QACtBC,yBAAyB;QACzBC,qBAAqB;QACrBC,wBAAwB;QACxBC,oBAAoB;QACpBC;MACF,CAAC,GAAGjB,MAAM;MACVG,iBAAiB,CAACe,SAAS,CAACC,GAAG,CAACd,sBAAsB,CAAC;MACvD,MAAMe,KAAK,GAAGjB,iBAAiB,CAACkB,aAAa,CAACT,sBAAsB,CAAC;MACrE,IAAIQ,KAAK,EAAE;QACTA,KAAK,CAACF,SAAS,CAACC,GAAG,CAACb,UAAU,CAAC;MACjC;MACA,MAAMgB,QAAQ,GAAGnB,iBAAiB,CAACkB,aAAa,CAC9CR,yBACF,CAAC;MACD,IAAIS,QAAQ,EAAE;QACZA,QAAQ,CAACJ,SAAS,CAACC,GAAG,CAACZ,aAAa,CAAC;MACvC;MACA,MAAMgB,IAAI,GAAGpB,iBAAiB,CAACkB,aAAa,CAACP,qBAAqB,CAAC;MACnE,IAAIS,IAAI,EAAE;QACRA,IAAI,CAACL,SAAS,CAACC,GAAG,CAACX,SAAS,CAAC;MAC/B;MACAT,OAAO,CACLI,iBAAiB,CAACqB,gBAAgB,CAACT,wBAAwB,CAAC,EAC3DU,IAAI,IAAK;QACRA,IAAI,CAACC,SAAS,GAAGD,IAAI,CAACC,SAAS,CAACC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC;QACnDF,IAAI,CAACP,SAAS,CAACC,GAAG,CAACV,YAAY,CAAC;MAClC,CACF,CAAC;MACDV,OAAO,CACLI,iBAAiB,CAACqB,gBAAgB,CAACR,oBAAoB,CAAC,EACvDS,IAAI,IAAK;QACRA,IAAI,CAACP,SAAS,CAACC,GAAG,CAACT,QAAQ,CAAC;QAC5B,IACEe,IAAI,CAACP,SAAS,CAACU,QAAQ,CAACX,mBAAmB,CAAC,IAC5Cb,aAAa,CAAEyB,MAAM,GAAG,CAAC,EACzB;UACAJ,IAAI,CAACP,SAAS,CAACC,GAAG,CAACR,aAAa,CAAC;QACnC,CAAC,MAAM,IACLc,IAAI,CAACP,SAAS,CAACU,QAAQ,CAACX,mBAAmB,CAAC,IAC5Cb,aAAa,CAAEyB,MAAM,KAAK,CAAC,EAC3B;UACAJ,IAAI,CAACP,SAAS,CAACY,MAAM,CAACnB,aAAa,CAAC;QACtC;MACF,CACF,CAAC;IACH;EACF,CAAC;;EAED;AACJ;AACA;EACI,MAAMoB,QAAQ,GAAGA,CAAA,KAAM;IACrB9B,EAAE,CAAC+B,aAAa,CAACC,IAAI,CAAC,+BAA+B,CAAC;EACxD,CAAC;EAED,OAAO;IACLC,aAAa,EAAEhC,yBAAyB;IACxCiC,YAAY,EAAEjC,yBAAyB;IACvCkC,aAAa,EAAElC,yBAAyB;IACxCmC,MAAM,EAAEnC,yBAAyB;IACjCoC,OAAO,EAAE,CAACP,QAAQ;EACpB,CAAC;AACH,CAAC"}