{"version":3,"file":"copy.js","names":["html","property","customElement","prefix","styles","CDSIconButton","CDSCopy","_decorate","_initialize","_CDSIconButton","constructor","args","F","d","kind","key","value","timeoutId","timeout","_this$shadowRoot","buttonClasses","shadowRoot","querySelector","classList","clearTimeout","undefined","_showFeedback","add","_animation","requestUpdate","setTimeout","remove","_createHandleFeedbackTooltip","_handleClickButton","_handleFeedbackTooltip","feedbackTimeout","decorators","type","Number","attribute","_renderTooltipContent","_t","_","feedback","_t2","connectedCallback","closeOnActivation","align","addEventListener","_get","_getPrototypeOf","prototype","call","updated","changedProperties","_this$shadowRoot2","_this$shadowRoot4","_this$parentNode","_this$shadowRoot3","setAttribute","parentNode","host","textContent","static"],"sources":["components/copy/copy.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html } from 'lit';\nimport { property, customElement } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport styles from '../copy-button/copy-button.scss';\nimport CDSIconButton from '../icon-button/icon-button';\n\n/**\n * Copy.\n *\n * @element cds-copy\n */\n@customElement(`${prefix}-copy`)\nclass CDSCopy extends CDSIconButton {\n  /**\n   * `true` to show the feedback tooltip.\n   */\n  private _showFeedback = false;\n\n  /**\n   * `true` to show the feedback tooltip.\n   */\n  private _animation = '';\n\n  private _createHandleFeedbackTooltip = () => {\n    let timeoutId: number | void;\n    return (timeout: number) => {\n      const buttonClasses = this.shadowRoot?.querySelector('button')?.classList;\n\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = undefined;\n      }\n      this._showFeedback = true;\n      buttonClasses?.add(`${prefix}--copy-btn--animating`);\n      this._animation = 'fade-in';\n      buttonClasses?.add(`${prefix}--copy-btn--${this._animation}`);\n      this.requestUpdate();\n      timeoutId = setTimeout(() => {\n        this._showFeedback = false;\n        this._animation = 'fade-out';\n        buttonClasses?.remove(`${prefix}--copy-btn--fade-in`);\n        buttonClasses?.add(`${prefix}--copy-btn--${this._animation}`);\n        this.requestUpdate();\n      }, timeout) as unknown as number;\n    };\n  };\n\n  /**\n   * Handles showing/hiding the feedback tooltip.\n   */\n  private _handleFeedbackTooltip = this._createHandleFeedbackTooltip();\n\n  /**\n   * Handles `click` event on the copy button.\n   */\n  private _handleClickButton() {\n    this._handleFeedbackTooltip(this.feedbackTimeout);\n  }\n\n  /**\n   * Specify the string that is displayed when the button is clicked and the content is copi\n   */\n  @property()\n  feedback = 'Copied!';\n\n  /**\n   * The number in milliseconds to determine how long the tooltip should remain.\n   */\n  @property({ type: Number, attribute: 'feedback-timeout' })\n  feedbackTimeout = 2000;\n\n  // eslint-disable-next-line class-methods-use-this\n  protected _renderTooltipContent() {\n    return html`\n      <cds-tooltip-content>\n        ${this._showFeedback\n          ? this.feedback\n          : html`<slot name=\"tooltip-content\"></slot>`}\n      </cds-tooltip-content>\n    `;\n  }\n\n  connectedCallback() {\n    this.closeOnActivation = false;\n    this.align = 'bottom';\n\n    this.addEventListener('click', this._handleClickButton);\n\n    super.connectedCallback();\n  }\n\n  updated(changedProperties) {\n    this.shadowRoot\n      ?.querySelector('button')\n      ?.addEventListener('animationend', () => {\n        if (this._animation === 'fade-out') {\n          const buttonClasses =\n            this.shadowRoot?.querySelector('button')?.classList;\n          buttonClasses?.remove(`${prefix}--copy-btn--animating`);\n          buttonClasses?.remove(`${prefix}--copy-btn--${this._animation}`);\n          this._animation = '';\n        }\n      });\n\n    super.updated(changedProperties);\n\n    this.shadowRoot\n      ?.querySelector('button') // @ts-ignore: TS thinks `host` doesn't exist on `parentNode`\n      ?.setAttribute('aria-label', this.parentNode?.host.textContent);\n  }\n\n  static styles = styles;\n}\n\nexport default CDSCopy;\n"],"mappings":"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"}