{"version":3,"file":"table-toolbar-search.js","names":["classMap","LitElement","html","property","query","prefix","HostListenerMixin","HostListener","INPUT_SIZE","CDSSearch","styles","carbonElement","customElement","CDSTableToolbarSearch","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","decorators","key","value","_handleUserInitiatedExpand","expanded","updateComplete","_inputNode","inputNode","focus","_handleFocusIn","_handleFocusOut","event","contains","relatedTarget","persistent","_handleSearchClick","type","Boolean","reflect","LARGE","connectedCallback","hasAttribute","setAttribute","_get","_getPrototypeOf","prototype","call","render","result","size","handleSearchClick","classes","_t","_","static","eventInput","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/data-table/table-toolbar-search.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport HostListener from '../../globals/decorators/host-listener';\nimport { INPUT_SIZE } from '../text-input/text-input';\nimport CDSSearch from '../search/search';\nimport styles from './data-table.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Table toolbar search.\n *\n * @element cds-table-toolbar-search\n * @fires cds-search-input - The custom event fired after the search content is changed upon a user gesture.\n */\n@customElement(`${prefix}-table-toolbar-search`)\nclass CDSTableToolbarSearch extends HostListenerMixin(CDSSearch) {\n  @query('input')\n  private _inputNode!: HTMLInputElement;\n\n  /**\n   * Handles user-initiated gestures for expanding the search box.\n   */\n  private async _handleUserInitiatedExpand() {\n    this.expanded = true;\n    await this.updateComplete;\n    const { _inputNode: inputNode } = this;\n    inputNode?.focus();\n  }\n\n  /**\n   * Handles `focus` event handler on this element.\n   */\n  @HostListener('focusin')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleFocusIn() {\n    this._handleUserInitiatedExpand();\n  }\n\n  /**\n   * Handles `blur` event handler on this element.\n   *\n   * @param event The event.\n   */\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleFocusOut(event: FocusEvent) {\n    if (\n      !this.contains(event.relatedTarget as Node) &&\n      !this.value &&\n      !this.persistent\n    ) {\n      this.expanded = false;\n    }\n  }\n\n  /**\n   * Handles `click` event handler on the search box.\n   */\n  private _handleSearchClick() {\n    this._handleUserInitiatedExpand();\n  }\n\n  /**\n   * `true` if the search box should be expanded.\n   */\n  @property({ type: Boolean, reflect: true })\n  expanded = false;\n\n  /**\n   * `true` if the search box should be always be open.\n   */\n  @property({ type: Boolean, reflect: true })\n  persistent = false;\n\n  /**\n   * The search box size.\n   */\n  @property({ reflect: true })\n  size = INPUT_SIZE.LARGE;\n\n  connectedCallback() {\n    if (!this.hasAttribute('role')) {\n      this.setAttribute('role', 'search');\n    }\n    super.connectedCallback();\n  }\n\n  render() {\n    const result = super.render();\n    const {\n      persistent,\n      expanded,\n      size,\n      _handleSearchClick: handleSearchClick,\n    } = this;\n    const classes = classMap({\n      [`${prefix}--search`]: true,\n      [`${prefix}--search--${size}`]: size,\n    });\n    if (persistent) {\n      this.expanded = true;\n    }\n    return html`\n      <div\n        class=\"${classes}\"\n        tabindex=\"${expanded ? '-1' : '0'}\"\n        @click=\"${handleSearchClick}\">\n        ${result}\n      </div>\n    `;\n  }\n\n  /**\n   * The name of the custom event fired after the search content is changed upon a user gesture.\n   */\n  static get eventInput() {\n    // The code uses on in `<cds-search>`, but definition is done also here for React event generation\n    return `${prefix}-search-input`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles;\n}\n\nexport default CDSTableToolbarSearch;\n"],"mappings":"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"}