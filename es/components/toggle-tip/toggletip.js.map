{"version":3,"file":"toggletip.js","names":["classMap","html","LitElement","customElement","property","Information16","prefix","HostListener","HostListenerMixin","FocusMixin","POPOVER_ALIGNMENT","styles","CDSToggletip","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","decorators","reflect","key","value","TOP","type","Boolean","_handleActionsSlotChange","target","hasContent","assignedNodes","setAttribute","removeAttribute","open","event","_handleFocusOut","contains","relatedTarget","_t","_","_t2","id","_handleClick","_t3","_t4","_renderTooltipButton","_renderTooltipContent","render","alignment","classes","_t5","_renderToggleTipLabel","_renderInnerContent","static","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/toggle-tip/toggletip.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport Information16 from '@carbon/icons/lib/information/16';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport FocusMixin from '../../globals/mixins/focus';\nimport { POPOVER_ALIGNMENT } from '../popover/defs';\nimport styles from './toggletip.scss';\n\n/**\n * Definition tooltip.\n *\n * @element cds-toggletip\n */\n@customElement(`${prefix}-toggletip`)\nclass CDSToggletip extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * How the tooltip is aligned to the trigger button.\n   */\n  @property({ reflect: true })\n  alignment = POPOVER_ALIGNMENT.TOP;\n\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  private _handleActionsSlotChange({ target }: Event) {\n    const hasContent = (target as HTMLSlotElement).assignedNodes();\n    hasContent\n      ? this.setAttribute('has-actions', '')\n      : this.removeAttribute('has-actions');\n  }\n\n  protected _handleClick = () => {\n    this.open = !this.open;\n  };\n\n  /**\n   * Handles `keydown` event on this element.\n   */\n  @HostListener('keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  protected _handleKeydown = async (event) => {\n    if (event.key === 'Escape') {\n      this.open = false;\n    }\n  };\n\n  /**\n   * Handles `blur` event handler on the document this element is in.\n   *\n   * @param event The event.\n   */\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  protected _handleFocusOut(event: FocusEvent) {\n    if (!this.contains(event.relatedTarget as Node)) {\n      this.open = false;\n    }\n  }\n\n  protected _renderToggleTipLabel = () => {\n    return html`\n      <span class=\"${prefix}--toggletip-label\">\n        <slot></slot>\n      </span>\n    `;\n  };\n\n  protected _renderTooltipButton = () => {\n    return html`\n      <button\n        aria-controls=\"${this.id}\"\n        class=\"${prefix}--toggletip-button\"\n        @click=${this._handleClick}>\n        ${Information16({ id: 'trigger' })}\n      </button>\n    `;\n  };\n\n  protected _renderTooltipContent = () => {\n    return html`\n      <span class=\"${prefix}--popover\">\n        <span class=\"${prefix}--popover-content\">\n          <div class=\"${prefix}--toggletip-content\">\n            <slot name=\"body-text\"></slot>\n            <div class=\"${prefix}--toggletip-actions\">\n              <slot\n                name=\"actions\"\n                @slotchange=\"${this._handleActionsSlotChange}\"></slot>\n            </div>\n          </div>\n        </span>\n        <span class=\"${prefix}--popover-caret\"></span>\n      </span>\n    `;\n  };\n\n  protected _renderInnerContent = () => {\n    return html`\n      ${this._renderTooltipButton()} ${this._renderTooltipContent()}\n    `;\n  };\n\n  render() {\n    const { alignment, open } = this;\n    const classes = classMap({\n      [`${prefix}--popover-container`]: true,\n      [`${prefix}--popover--caret`]: true,\n      [`${prefix}--popover--high-contrast`]: true,\n      [`${prefix}--popover--open`]: open,\n      [`${prefix}--popover--${alignment}`]: alignment,\n      [`${prefix}--toggletip`]: true,\n      [`${prefix}--toggletip--open`]: open,\n    });\n    return html`\n      ${this._renderToggleTipLabel()}\n      <span class=\"${classes}\">\n        ${this._renderInnerContent()}\n      </span>\n    </span>\n    `;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  static styles = styles;\n}\n\nexport default CDSToggletip;\n"],"mappings":"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"}