{"version":3,"file":"search.js","names":["classMap","LitElement","html","property","Close16","Search16","prefix","ifNonEmpty","FocusMixin","FormMixin","INPUT_SIZE","HostListener","HostListenerMixin","styles","carbonElement","customElement","CDSSearch","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","_handleInput","event","target","dispatchEvent","CustomEvent","eventInput","bubbles","composed","cancelable","detail","_handleClearInputButtonClick","input","shadowRoot","querySelector","focus","decorators","_handleExpand","expandable","expanded","setAttribute","_handleClose","removeAttribute","_handleSlotChange","icon","hasCustomIcon","_handleFormdata","formData","disabled","name","append","attribute","type","Boolean","reflect","MEDIUM","String","render","autoComplete","closeButtonLabelText","labelText","placeholder","role","handleInput","handleClearInputButtonClick","handleSlotChange","clearClasses","_t","_","_t2","_t3","part","class","static","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/search/search.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport Close16 from '@carbon/icons/lib/close/16';\nimport Search16 from '@carbon/icons/lib/search/16';\nimport { prefix } from '../../globals/settings';\nimport ifNonEmpty from '../../globals/directives/if-non-empty';\nimport FocusMixin from '../../globals/mixins/focus';\nimport FormMixin from '../../globals/mixins/form';\nimport { INPUT_SIZE } from '../text-input/text-input';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport styles from './search.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\n/**\n * Search box.\n *\n * @element cds-search\n * @csspart search-icon The search icon.\n * @csspart label-text The label text.\n * @csspart input The input box.\n * @csspart close-button The close button.\n * @csspart close-icon The close icon.\n * @fires cds-search-input - The custom event fired after the search content is changed upon a user gesture.\n */\n@customElement(`${prefix}-search`)\nclass CDSSearch extends HostListenerMixin(FocusMixin(FormMixin(LitElement))) {\n  /**\n   * Handles `input` event on the `<input>` in the shadow DOM.\n   */\n  private _handleInput(event: Event) {\n    const { target } = event;\n    const { value } = target as HTMLInputElement;\n    this.dispatchEvent(\n      new CustomEvent((this.constructor as typeof CDSSearch).eventInput, {\n        bubbles: true,\n        composed: true,\n        cancelable: false,\n        detail: {\n          value,\n        },\n      })\n    );\n    this.value = value;\n  }\n\n  /**\n   * Handles `click` event on the button to clear search box content.\n   */\n  private _handleClearInputButtonClick() {\n    if (this.value) {\n      this.dispatchEvent(\n        new CustomEvent((this.constructor as typeof CDSSearch).eventInput, {\n          bubbles: true,\n          composed: true,\n          cancelable: false,\n          detail: {\n            value: '',\n          },\n        })\n      );\n      this.value = '';\n\n      // set focus on back to input once search is cleared\n      const input = this.shadowRoot!.querySelector('input');\n      (input as HTMLElement).focus();\n    }\n  }\n\n  /**\n   * Handles `focus` event on the button when the button can be expanded\n   */\n  @HostListener('focus')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleExpand() {\n    if (this.expandable && !this.expanded) {\n      this.setAttribute('expanded', '');\n    }\n  }\n\n  /**\n   * Handles `focusout` event on the component to be closed after being expanded\n   * Will not close if there is a value typed within.\n   */\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClose() {\n    if (this.expandable && this.expanded && !this.value) {\n      this.removeAttribute('expanded');\n    }\n  }\n\n  /**\n   * Handler for @slotchange, will only be ran if user sets an element under the \"icon\" slot.\n   *\n   * @private\n   */\n  private _handleSlotChange() {\n    const icon = this.querySelector('svg');\n    icon?.setAttribute('part', 'search-icon');\n    icon?.setAttribute('class', `${prefix}--search-magnifier-icon`);\n    icon?.setAttribute('role', `img`);\n    this.hasCustomIcon = true;\n  }\n\n  _handleFormdata(event: Event) {\n    const { formData } = event as any; // TODO: Wait for `FormDataEvent` being available in `lib.dom.d.ts`\n    const { disabled, name, value } = this;\n    if (!disabled) {\n      formData.append(name, value);\n    }\n  }\n\n  /**\n   * Specify an optional value for the autocomplete property on the underlying <input>,\n   * defaults to \"off\"\n   */\n  @property({ attribute: 'autocomplete' })\n  autoComplete = 'off';\n\n  /**\n   * Specify a label to be read by screen readers on the \"close\" button\n   */\n  @property({ attribute: 'close-button-label-text' })\n  closeButtonLabelText = '';\n\n  /**\n   * `true` if the search box should be disabled.\n   */\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  /**\n   * `true` if the search bar can be expandable\n   */\n  @property({ type: Boolean, reflect: true })\n  expandable = false;\n\n  /**\n   * `true` if the expandable search has been expanded\n   */\n  @property({ type: Boolean, reflect: true })\n  expanded = false;\n\n  @property({ type: Boolean })\n  hasCustomIcon = false;\n\n  /**\n   * The label text.\n   */\n  @property({ attribute: 'label-text' })\n  labelText = '';\n\n  /**\n   * The form name in `FormData`.\n   */\n  @property()\n  name = '';\n\n  /**\n   * Specify the role for the underlying <input>, defaults to searchbox\n   */\n  @property()\n  role = '';\n\n  /**\n   * The placeholder text.\n   */\n  @property()\n  placeholder = 'Search';\n\n  /**\n   * The search box size.\n   */\n  @property({ reflect: true })\n  size = INPUT_SIZE.MEDIUM;\n\n  /**\n   * The `<input>` name.\n   */\n  @property()\n  type = '';\n\n  /**\n   * The value.\n   */\n  @property({ type: String })\n  value = '';\n\n  render() {\n    const {\n      autoComplete,\n      closeButtonLabelText,\n      disabled,\n      hasCustomIcon,\n      labelText,\n      name,\n      placeholder,\n      role,\n      type,\n      value = '',\n      _handleInput: handleInput,\n      _handleClearInputButtonClick: handleClearInputButtonClick,\n      _handleSlotChange: handleSlotChange,\n    } = this;\n    const clearClasses = classMap({\n      [`${prefix}--search-close`]: true,\n      [`${prefix}--search-close--hidden`]: !this.value,\n    });\n    return html`\n      <div class=\"${prefix}--search-magnifier\">\n        <slot name=\"icon\" @slotchange=${handleSlotChange}>\n          ${hasCustomIcon\n            ? html``\n            : html`${Search16({\n                part: 'search-icon',\n                class: `${prefix}--search-magnifier-icon`,\n                role: 'img',\n              })}`}\n        </slot>\n      </div>\n      <label for=\"input\" part=\"label-text\" class=\"${prefix}--label\">\n        <slot>${labelText}</slot>\n      </label>\n      <input\n        autocomplete=\"${autoComplete}\"\n        id=\"input\"\n        part=\"input\"\n        type=\"${ifNonEmpty(type)}\"\n        class=\"${prefix}--search-input\"\n        ?disabled=\"${disabled}\"\n        name=\"${ifNonEmpty(name)}\"\n        placeholder=\"${ifNonEmpty(placeholder)}\"\n        role=\"${role}\"\n        .value=\"${value}\"\n        @input=\"${handleInput}\" />\n      <button\n        part=\"close-button\"\n        class=\"${clearClasses}\"\n        @click=\"${handleClearInputButtonClick}\"\n        type=\"button\"\n        aria-label=\"${closeButtonLabelText}\">\n        ${Close16({\n          part: 'close-icon',\n          'aria-label': closeButtonLabelText,\n          role: 'img',\n        })}\n      </button>\n    `;\n  }\n\n  /**\n   * The name of the custom event fired after the search content is changed upon a user gesture.\n   */\n  static get eventInput() {\n    return `${prefix}-search-input`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSSearch;\n"],"mappings":"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"}