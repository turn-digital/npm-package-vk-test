{"version":3,"file":"side-panel.js","names":["LitElement","html","property","query","state","prefix","HostListener","HostListenerMixin","SIDE_PANEL_SIZE","SIDE_PANEL_PLACEMENT","styles","selectorTabbable","carbonElement","customElement","ArrowLeft16","Close20","moderate02","PRECEDING","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","FOLLOWING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","blockClass","blockClassActionSet","observeResize","observer","elem","observe","release","unobserve","tryFocusElems","elems","reverse","i","length","focus","ownerDocument","activeElement","CDSSidePanel","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","decorators","target","relatedTarget","_this$shadowRoot","open","_startSentinelNode","startSentinelNode","_endSentinelNode","endSentinelNode","oldContains","contains","currentContains","shadowRoot","selectorTabbableForSidePanel","comparisonResult","compareDocumentPosition","_delay","querySelectorAll","_handleUserInitiatedClose","_window","window","matchMedia","matches","_handleClickOnOverlay","event","preventCloseOnClickOutside","_handleCloseClick","triggeredBy","init","bubbles","cancelable","composed","detail","dispatchEvent","CustomEvent","eventBeforeClose","eventClose","_handleNavigateBack","eventNavigateBack","_this$shadowRoot2","slug","querySelector","otherButtons","iconButtonSize","_this$querySelectorAl","actions","call","test","size","setAttribute","forEach","btn","_handleSlugChange","e","_checkUpdateIconButtonSizes","childItems","assignedNodes","_hasSlug","_handleSubtitleChange","subtitle","_hasSubtitle","_handleActionToolbarChange","toolbarActions","assignedElements","_hasActionToolbar","toolbarAction","_this$_actions","_this$_sidePanel$styl","actionHeightPx","_actions","offsetHeight","actionsHeight","Math","round","_sidePanel","style","setProperty","_handleActionsChange","_actions$length","actionsCount","_actionsCount","console","warn","condensedActions","classList","add","setTimeout","_checkUpdateBottomPadding","ResizeObserver","reason","scrollY","_this$_subtitle","_this$_sidePanel","updateComplete","_innerContent","_measurements","subtitleHeight","_subtitle","_this$_sidePanel2","_this$_bodyContent","_this$_titleContainer","_this$_title","_this$_label","_this$_actionToolbar","_this$_sidePanel3","panelHeight","scrollSectionHeight","_bodyContent","titleContainerHeight","_titleContainer","titleHeight","_title","labelHeight","_label","totalScrollingHeight","actionToolbarHeight","_actionToolbar","animateTitle","_ref","_window2","_window2$getComputedS","_this$_innerContent","_this$_innerContent2","_this$_innerContent3","_this$_innerContent4","titlePaddingTop","parseInt","getComputedStyle","transitionDistance","max","scrollHeight","clientHeight","scrollAnimationProgress","scrolled","min","abs","reduceTitleContainerHeightAmount","trunc","_setMeasuredCustomProperties","scrollTop","reflect","attribute","type","Boolean","Number","String","RIGHT","MEDIUM","connectObservers","_hObserveResize","_resizeObserver","disconnectObservers","removeEventListener","_scrollObserver","connectedCallback","_get","_getPrototypeOf","prototype","disconnectedCallback","render","closeIconDescription","currentStep","includeOverlay","labelText","navigationBackIconDescription","placement","slideIn","title","_isOpen","_t","_","actionsMultiple","titleTemplate","_t2","_reducedMotion","_t3","slot","_t4","_t5","_t6","_t7","_t8","sidePanel","addEventListener","requestAnimationFrame","selectorPageContent","pageContentEl","document","newValues","marginInlineStart","marginInlineEnd","inlineSize","transition","transitionProperty","offsetWidth","Object","keys","firstUpdated","checkSetOpen","adjustPageContent","updated","changedProperties","has","_launcher","focusNode","selectorInitialFocus","static","ms","Promise","resolve"],"sources":["components/side-panel/side-panel.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2023, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property, query, state } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport { SIDE_PANEL_SIZE, SIDE_PANEL_PLACEMENT } from './defs';\nimport styles from './side-panel.scss';\nimport { selectorTabbable } from '../../globals/settings';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport ArrowLeft16 from '@carbon/icons/lib/arrow--left/16';\nimport Close20 from '@carbon/icons/lib/close/20';\nimport { moderate02 } from '@carbon/motion';\nimport '../button/index';\nimport '../layer/index';\nimport Handle from '../../globals/internal/handle';\nimport './side-panel-button-set';\n\nexport { SIDE_PANEL_SIZE };\n\n// eslint-disable-next-line no-bitwise\nconst PRECEDING =\n  Node.DOCUMENT_POSITION_PRECEDING | Node.DOCUMENT_POSITION_CONTAINS;\n// eslint-disable-next-line no-bitwise\nconst FOLLOWING =\n  Node.DOCUMENT_POSITION_FOLLOWING | Node.DOCUMENT_POSITION_CONTAINED_BY;\n\nconst blockClass = `${prefix}--side-panel`;\nconst blockClassActionSet = `${prefix}--action-set`;\n\n/**\n * Observes resize of the given element with the given resize observer.\n *\n * @param observer The resize observer.\n * @param elem The element to observe the resize.\n */\nconst observeResize = (observer: ResizeObserver, elem: Element) => {\n  if (!elem) {\n    return null;\n  }\n  observer.observe(elem);\n  return {\n    release() {\n      observer.unobserve(elem);\n      return null;\n    },\n  } as Handle;\n};\n\n/**\n * Tries to focus on the given elements and bails out if one of them is successful.\n *\n * @param elems The elements.\n * @param reverse `true` to go through the list in reverse order.\n * @returns `true` if one of the attempts is successful, `false` otherwise.\n */\nfunction tryFocusElems(elems: NodeListOf<HTMLElement>, reverse: boolean) {\n  if (!reverse) {\n    for (let i = 0; i < elems.length; ++i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  } else {\n    for (let i = elems.length - 1; i >= 0; --i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * SidePanel.\n *\n * @element cds-side-panel\n * @csspart dialog The dialog.\n * @fires cds-side-panel-beingclosed\n *   The custom event fired before this side-panel is being closed upon a user gesture.\n *   Cancellation of this event stops the user-initiated action of closing this side-panel.\n * @fires cds-side-panel-closed - The custom event fired after this side-panel is closed upon a user gesture.\n */\n@customElement(`${prefix}-side-panel`)\nclass CDSSidePanel extends HostListenerMixin(LitElement) {\n  /**\n   * The handle for observing resize of the parent element of this element.\n   */\n  private _hObserveResize: Handle | null = null;\n\n  /**\n   * The element that had focus before this side-panel gets open.\n   */\n  private _launcher: Element | null = null;\n\n  /**\n   * Node to track focus going outside of side-panel content.\n   */\n  @query('#start-sentinel')\n  private _startSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Node to track focus going outside of side-panel content.\n   */\n  @query('#end-sentinel')\n  private _endSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Node to track side panel.\n   */\n  @query(`.${blockClass}`)\n  private _sidePanel!: HTMLDivElement;\n\n  /**\n   * Node to track size of actions\n   */\n  @query(`.${blockClass}__actions`)\n  private _actions!: HTMLElement;\n\n  @query(`.${blockClass}__label`)\n  private _label!: HTMLElement;\n\n  @query(`.${blockClass}__title-container`)\n  private _titleContainer!: HTMLElement;\n\n  @query(`.${blockClass}__title`)\n  private _title!: HTMLElement;\n\n  @query(`.${blockClass}__subtitle`)\n  private _subtitle!: HTMLElement;\n\n  @query(`.${blockClass}__action-toolbar`)\n  private _actionToolbar!: HTMLElement;\n\n  @query(`.${blockClass}__inner-content`)\n  private _innerContent!: HTMLElement;\n\n  @query(`.${blockClass}__body-content`)\n  private _bodyContent!: HTMLElement;\n\n  @state()\n  _isOpen = false;\n\n  @state()\n  _containerScrollTop = -16;\n\n  @state()\n  _hasSubtitle = false;\n\n  @state()\n  _hasSlug = false;\n\n  @state()\n  _hasActionToolbar = false;\n\n  @state()\n  _actionsCount = 0;\n\n  @state()\n  _slugCloseSize = 'sm';\n\n  /**\n   * Handles `blur` event on this element.\n   *\n   * @param event The event.\n   * @param event.target The event target.\n   * @param event.relatedTarget The event relatedTarget.\n   */\n  @HostListener('shadowRoot:focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleBlur = async ({ target, relatedTarget }: FocusEvent) => {\n    const {\n      // condensedActions,\n      open,\n      _startSentinelNode: startSentinelNode,\n      _endSentinelNode: endSentinelNode,\n    } = this;\n\n    const oldContains = target !== this && this.contains(target as Node);\n    const currentContains =\n      relatedTarget !== this &&\n      (this.contains(relatedTarget as Node) ||\n        (this.shadowRoot?.contains(relatedTarget as Node) &&\n          relatedTarget !== (startSentinelNode as Node) &&\n          relatedTarget !== (endSentinelNode as Node)));\n\n    // Performs focus wrapping if _all_ of the following is met:\n    // * This side-panel is open\n    // * The viewport still has focus\n    // * SidePanel body used to have focus but no longer has focus\n    const { selectorTabbable: selectorTabbableForSidePanel } = this\n      .constructor as typeof CDSSidePanel;\n\n    if (open && relatedTarget && oldContains && !currentContains) {\n      const comparisonResult = (target as Node).compareDocumentPosition(\n        relatedTarget as Node\n      );\n      // eslint-disable-next-line no-bitwise\n      if (relatedTarget === startSentinelNode || comparisonResult & PRECEDING) {\n        await (this.constructor as typeof CDSSidePanel)._delay();\n        if (\n          !tryFocusElems(\n            this.querySelectorAll(selectorTabbableForSidePanel),\n            true\n          ) &&\n          relatedTarget !== this\n        ) {\n          this.focus();\n        }\n      }\n      // eslint-disable-next-line no-bitwise\n      else if (\n        relatedTarget === endSentinelNode ||\n        comparisonResult & FOLLOWING\n      ) {\n        await (this.constructor as typeof CDSSidePanel)._delay();\n        if (\n          !tryFocusElems(\n            this.querySelectorAll(selectorTabbableForSidePanel),\n            true\n          )\n        ) {\n          this.focus();\n        }\n      }\n    }\n  };\n\n  @HostListener('document:keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeydown = ({ key, target }: KeyboardEvent) => {\n    if (key === 'Esc' || key === 'Escape') {\n      this._handleUserInitiatedClose(target);\n    }\n  };\n\n  private _reducedMotion =\n    typeof window !== 'undefined' && window?.matchMedia\n      ? window.matchMedia('(prefers-reduced-motion: reduce)')\n      : { matches: true };\n\n  /**\n   * Handles `click` event on the side-panel container.\n   *\n   * @param event The event.\n   */\n  private _handleClickOnOverlay(event: MouseEvent) {\n    if (!this.preventCloseOnClickOutside) {\n      this._handleUserInitiatedClose(event.target);\n    }\n  }\n\n  /**\n   * Handles `click` event on the side-panel container.\n   *\n   * @param event The event.\n   */\n  private _handleCloseClick(event: MouseEvent) {\n    this._handleUserInitiatedClose(event.target);\n  }\n\n  /**\n   * Handles user-initiated close request of this side-panel.\n   *\n   * @param triggeredBy The element that triggered this close request.\n   */\n  private _handleUserInitiatedClose(triggeredBy: EventTarget | null) {\n    if (this.open) {\n      const init = {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: {\n          triggeredBy,\n        },\n      };\n      if (\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSSidePanel).eventBeforeClose,\n            init\n          )\n        )\n      ) {\n        this.open = false;\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSSidePanel).eventClose,\n            init\n          )\n        );\n      }\n    }\n  }\n\n  private _handleNavigateBack(triggeredBy: EventTarget | null) {\n    this.dispatchEvent(\n      new CustomEvent(\n        (this.constructor as typeof CDSSidePanel).eventNavigateBack,\n        {\n          composed: true,\n          detail: {\n            triggeredBy,\n          },\n        }\n      )\n    );\n  }\n\n  private _checkUpdateIconButtonSizes = () => {\n    const slug = this.querySelector('cds-slug');\n    const otherButtons = this?.shadowRoot?.querySelectorAll(\n      '#nav-back-button, #close-button'\n    );\n\n    let iconButtonSize = 'sm';\n\n    if (slug || otherButtons?.length) {\n      const actions = this?.querySelectorAll?.('cds-button[slot=\"actions\"]');\n\n      if (actions?.length && /l/.test(this.size)) {\n        iconButtonSize = 'md';\n      }\n    }\n\n    if (slug) {\n      slug?.setAttribute('size', iconButtonSize);\n    }\n\n    if (otherButtons) {\n      [...otherButtons].forEach((btn) => {\n        btn.setAttribute('size', iconButtonSize);\n      });\n    }\n  };\n\n  private _handleSlugChange(e: Event) {\n    this._checkUpdateIconButtonSizes();\n    const childItems = (e.target as HTMLSlotElement).assignedNodes();\n\n    this._hasSlug = childItems.length > 0;\n  }\n\n  private _handleSubtitleChange(e: Event) {\n    const target = e.target as HTMLSlotElement;\n    const subtitle = target?.assignedNodes();\n\n    this._hasSubtitle = subtitle.length > 0;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _handleActionToolbarChange(e: Event) {\n    const target = e.target as HTMLSlotElement;\n    const toolbarActions = target?.assignedElements();\n\n    this._hasActionToolbar = toolbarActions && toolbarActions.length > 0;\n\n    if (this._hasActionToolbar) {\n      for (const toolbarAction of toolbarActions) {\n        // toolbar actions size should always be sm\n        toolbarAction.setAttribute('size', 'sm');\n      }\n    }\n  }\n\n  private _checkUpdateBottomPadding = () => {\n    const actionHeightPx = this._actions?.offsetHeight + 16; // add additional 1rem spacing to bottom padding\n    const actionsHeight = `${Math.round(actionHeightPx / 16)}rem`;\n\n    this._sidePanel.style?.setProperty(\n      `--${blockClass}--content-bottom-padding`,\n      actionsHeight\n    );\n  };\n\n  private _handleActionsChange(e: Event) {\n    const target = e.target as HTMLSlotElement;\n    const actions = target?.assignedElements();\n\n    // update slug size\n    this._checkUpdateIconButtonSizes();\n\n    const actionsCount = actions?.length ?? 0;\n    if (actionsCount === 0) {\n      return;\n    } else if (actionsCount > 3) {\n      this._actionsCount = 3;\n      console.warn(`Too many side-panel actions, max 3.`);\n    } else {\n      this._actionsCount = actionsCount;\n    }\n\n    for (let i = 0; i < actionsCount; i++) {\n      if (i > 3) {\n        // hide excessive side panel actions\n        actions[i].setAttribute('hidden', '');\n        actions[i].setAttribute(\n          'data-actions-limit-3-exceeded',\n          `${actions.length}`\n        );\n      } else {\n        actions[i].setAttribute('size', this.condensedActions ? 'lg' : 'xl');\n        actions[i].classList.add(`${blockClassActionSet}__action-button`);\n      }\n    }\n\n    setTimeout(() => {\n      // update after the updates above are applied\n      this._checkUpdateBottomPadding();\n    }, 1);\n  }\n\n  /**\n   * The `ResizeObserver` instance for observing element resizes for re-positioning floating menu position.\n   */\n  // TODO: Wait for `.d.ts` update to support `ResizeObserver`\n  // @ts-ignore\n  private _resizeObserver = new ResizeObserver(() => {\n    if (this._sidePanel) {\n      this._checkUpdateBottomPadding();\n    }\n  });\n\n  private _measurements: any = {};\n\n  private _setMeasuredCustomProperties = async (reason, scrollY = 0) => {\n    await this.updateComplete;\n\n    if (!this._sidePanel || (!this.open && !this._innerContent)) {\n      return;\n    }\n\n    await (this.constructor as typeof CDSSidePanel)._delay(); // measure after brief delay for render\n    this._measurements.subtitleHeight = this._subtitle?.offsetHeight || 0; // set default subtitle height if a subtitle is not provided to enable scrolling animation\n    this._sidePanel?.style.setProperty(\n      `--${blockClass}--subtitle-container-height`,\n      `${this._measurements.subtitleHeight}px`\n    );\n\n    if (reason !== 'scroll') {\n      this._measurements.panelHeight = this._sidePanel?.offsetHeight || 0;\n      this._measurements.scrollSectionHeight =\n        this._bodyContent?.offsetHeight || 0;\n      this._measurements.titleContainerHeight =\n        this._titleContainer?.offsetHeight || 0;\n      this._measurements.titleHeight = this._title?.offsetHeight || 0;\n      this._measurements.labelHeight = this._label?.offsetHeight || 0;\n      this._measurements.totalScrollingHeight =\n        this._measurements.titleContainerHeight +\n        this._measurements.subtitleHeight +\n        this._measurements.scrollSectionHeight;\n      this._measurements.actionToolbarHeight =\n        this?._actionToolbar?.offsetHeight || 0;\n\n      this._sidePanel?.style.setProperty(\n        `--${blockClass}--title-text-height`,\n        this.animateTitle ? '0' : `${this._measurements.titleHeight + 24}px`\n      );\n\n      this._sidePanel.style.setProperty(\n        `--${blockClass}--action-bar-container-height`,\n        this.animateTitle ? '0' : `${this._measurements.actionToolbarHeight}px`\n      );\n\n      this._sidePanel.style.setProperty(\n        `--${blockClass}--label-text-height`,\n        `${this._measurements.labelHeight}px`\n      );\n      if (this.animateTitle) {\n        this._measurements.titlePaddingTop = parseInt(\n          (this._titleContainer &&\n            window &&\n            window?.getComputedStyle?.(this._titleContainer)?.[\n              'padding-top'\n            ]) ??\n            '0',\n          10\n        );\n\n        this._measurements.transitionDistance =\n          -1 *\n          Math.max(\n            this._measurements.titleHeight +\n              this._measurements.actionToolbarHeight +\n              this._measurements.titlePaddingTop -\n              this._measurements.titleContainerHeight,\n            this._innerContent?.offsetHeight - this._innerContent?.scrollHeight\n          );\n\n        // if the difference between the total scrolling height and the panel height is less than\n        // the subtitleElement height OR if the subtitle element height is 0, use that difference\n        // as the length of the scroll animation (otherwise the animation will not be able to complete\n        // because there is not enough scrolling distance to complete it).\n        this._measurements.subtitleHeight =\n          this._measurements.totalScrollingHeight -\n            this._measurements.panelHeight <\n          this._measurements.subtitleHeight\n            ? this._measurements.totalScrollingHeight -\n              this._measurements.panelHeight\n            : this._measurements.subtitleHeight === 0\n            ? 16\n            : this._measurements.subtitleHeight;\n        this._measurements.subtitleHeight =\n          this._measurements.subtitleHeight < 0\n            ? this._innerContent?.scrollHeight -\n              this._innerContent?.clientHeight\n            : this._measurements.subtitleHeight;\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--action-bar-container-height`,\n          `${this._measurements.actionToolbarHeight || 0}px`\n        );\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--title-height`,\n          `${this._measurements.titleHeight + 16}px`\n        );\n      }\n    } else {\n      if (this.animateTitle) {\n        const scrollAnimationProgress =\n          this._measurements.transitionDistance &&\n          this._measurements.transitionDistance > scrollY\n            ? scrollY / this._measurements.transitionDistance\n            : 1;\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--scroll-y`,\n          `${scrollY}px`\n        );\n\n        const scrolled = scrollY > 0;\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--subtitle-opacity`,\n          !scrolled\n            ? '1'\n            : `${\n                1 -\n                Math.min(this._measurements.transitionDistance, scrollY) /\n                  this._measurements.transitionDistance\n              }`\n        );\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--divider-opacity`,\n          !scrolled ? '0' : `${scrollAnimationProgress}`\n        );\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--title-y-position`,\n          !scrolled\n            ? '0rem'\n            : `${-Math.abs(\n                Math.min(1, scrollY / this._measurements.subtitleHeight)\n              )}rem`\n        );\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--collapsed-title-y-position`,\n          !scrolled\n            ? '1rem'\n            : `${\n                Math.max(0, this._measurements.subtitleHeight - scrollY) /\n                this._measurements.subtitleHeight\n              }rem`\n        );\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--title-container-height`,\n          !scrolled ? '0px' : `${this._measurements.titleContainerHeight}px`\n        );\n\n        const reduceTitleContainerHeightAmount =\n          ((this._measurements.labelHeight * scrollAnimationProgress) /\n            this._measurements.titleContainerHeight) *\n          100;\n\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--reduce-titles-by`,\n          !scrolled && !this.animateTitle\n            ? '0px'\n            : `${Math.trunc(reduceTitleContainerHeightAmount)}px`\n        );\n      } else {\n        this._sidePanel.style.setProperty(\n          `--${blockClass}--reduce-titles-by`,\n          '0px'\n        );\n      }\n    }\n  };\n\n  private _scrollObserver = (event) => {\n    this._setMeasuredCustomProperties('scroll', event.target.scrollTop);\n  };\n\n  /**\n   * Determines if the title will animate on scroll\n   */\n  @property({ reflect: true, attribute: 'animate-title', type: Boolean })\n  animateTitle = true;\n\n  /**\n   * Sets the close button icon description\n   */\n  @property({ reflect: true, attribute: 'close-icon-description' })\n  closeIconDescription = 'Close';\n\n  /**\n   * Determines whether the side panel should render the condensed version (affects action buttons primarily)\n   */\n  @property({ type: Boolean, reflect: true, attribute: 'condensed-actions' })\n  condensedActions = false;\n\n  /**\n   * Sets the current step of the side panel\n   */\n  @property({ reflect: true, attribute: 'current-step', type: Number })\n  currentStep;\n\n  /**\n   * Determines whether the side panel should render with an overlay\n   */\n  @property({ attribute: 'include-overlay', type: Boolean, reflect: true })\n  includeOverlay = false;\n\n  /**\n   * Sets the label text which will display above the title text\n   */\n  @property({ reflect: true, attribute: 'label-text' })\n  labelText;\n\n  /**\n   * Sets the icon description for the navigation back icon button\n   */\n  @property({ reflect: true, attribute: 'navigation-back-icon-description' })\n  navigationBackIconDescription = 'Back';\n\n  /**\n   * `true` if the side-panel should be open.\n   */\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * SidePanel placement.\n   */\n  @property({ reflect: true, type: String })\n  placement = SIDE_PANEL_PLACEMENT.RIGHT;\n\n  /**\n   * Prevent closing on click outside of side-panel\n   */\n  @property({ type: Boolean, attribute: 'prevent-close-on-click-outside' })\n  preventCloseOnClickOutside = false;\n\n  /**\n   * The initial location of focus in the side panel\n   */\n  @property({\n    reflect: true,\n    attribute: 'selector-initial-focus',\n    type: String,\n  })\n  selectorInitialFocus;\n\n  /**\n   * Selector for page content, used to push content to side except\n   */\n  @property({ reflect: true, attribute: 'selector-page-content' })\n  selectorPageContent = '';\n\n  /**\n   * SidePanel size.\n   */\n  @property({ reflect: true, type: String })\n  size = SIDE_PANEL_SIZE.MEDIUM;\n\n  /**\n   * Determines if this panel slides in\n   */\n  @property({ attribute: 'slide-in', type: Boolean, reflect: true })\n  slideIn = false;\n\n  /**\n   * Sets the title text\n   */\n  @property({ reflect: false, type: String })\n  title;\n\n  async connectObservers() {\n    await this.updateComplete;\n    this._hObserveResize = observeResize(this._resizeObserver, this._sidePanel);\n  }\n\n  disconnectObservers() {\n    if (this._hObserveResize) {\n      this._hObserveResize = this._hObserveResize.release();\n    }\n\n    if (this._innerContent) {\n      this._innerContent.removeEventListener('scroll', this._scrollObserver);\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.disconnectObservers();\n    this.connectObservers();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.disconnectObservers();\n  }\n\n  render() {\n    const {\n      animateTitle,\n      closeIconDescription,\n      condensedActions,\n      currentStep,\n      includeOverlay,\n      labelText,\n      navigationBackIconDescription,\n      open,\n      placement,\n      size,\n      slideIn,\n      title,\n    } = this;\n\n    if (!open && !this._isOpen) {\n      return html``;\n    }\n\n    const actionsMultiple = ['', 'single', 'double', 'triple'][\n      this._actionsCount\n    ];\n\n    const titleTemplate = html`\n      <div\n        class=${`${blockClass}__title-container`}\n        ?detail-step=${currentStep > 0}\n        ?has-title=${!!title}\n        ?no-title-animation=${!animateTitle}\n        ?reduced-motion=${this._reducedMotion.matches}\n        ?has-action-toolbar=${this._hasActionToolbar}>\n        <!-- render back button -->\n        ${currentStep > 0\n          ? html`<cds-icon-button\n              aria-label=${navigationBackIconDescription}\n              kind=\"ghost\"\n              size=\"sm\"\n              tooltip-text=${navigationBackIconDescription}\n              class=${`${blockClass}__nav-back-button`}\n              @click=${this._handleNavigateBack}>\n              ${ArrowLeft16({ slot: 'icon' })}\n            </cds-icon-button>`\n          : ''}\n\n        <!-- render title label -->\n        ${title?.length && labelText?.length\n          ? html` <p class=${`${blockClass}__label`}>${labelText}</p>`\n          : ''}\n\n        <!-- render collapsed title -->\n        ${animateTitle && title?.length && !this._reducedMotion.matches\n          ? html`<h2\n              class=${`${blockClass}__collapsed-title`}\n              title=${title}\n              aria-hidden=\"true\">\n              ${title}\n            </h2>`\n          : ''}\n\n        <!-- render title -->\n        ${title?.length\n          ? html`<h2 class=${`${blockClass}__title`} title=${title}>\n              ${title}\n            </h2>`\n          : ''}\n      </div>\n\n      <!-- render close button area -->\n      <div class=${`${blockClass}__slug-and-close`}>\n        <slot name=\"slug\" @slotchange=${this._handleSlugChange}></slot>\n        <!-- {normalizedSlug} -->\n        <cds-icon-button\n          aria-label=${closeIconDescription}\n          kind=\"ghost\"\n          size=\"sm\"\n          tooltip-text=${closeIconDescription}\n          class=${`${blockClass}__close-button`}\n          @click=${this._handleCloseClick}>\n          ${Close20({ slot: 'icon' })}\n        </cds-icon-button>\n      </div>\n\n      <!-- render sub title -->\n      <p\n        class=${`${blockClass}__subtitle`}\n        ?hidden=${!this._hasSubtitle}\n        ?no-title-animation=${!animateTitle}\n        ?no-action-toolbar=${!this._hasActionToolbar}\n        ?no-title=${!title}>\n        <slot name=\"subtitle\" @slotchange=${this._handleSubtitleChange}></slot>\n      </p>\n\n      <div\n        class=${`${blockClass}__action-toolbar`}\n        ?hidden=${!this._hasActionToolbar}\n        ?no-title-animation=${!animateTitle}>\n        <slot\n          name=\"action-toolbar\"\n          @slotchange=${this._handleActionToolbarChange}></slot>\n      </div>\n    `;\n\n    return html`\n      <div\n        class=${blockClass}\n        part=\"dialog\"\n        role=\"complementary\"\n        placement=\"${placement}\"\n        ?has-slug=${this._hasSlug}\n        ?open=${this._isOpen}\n        ?opening=${open && !this._isOpen}\n        ?closing=${!open && this._isOpen}\n        ?overlay=${includeOverlay || slideIn}\n        size=${size}>\n        <cds-layer level=\"1\">\n          <a\n            id=\"start-sentinel\"\n            class=\"sentinel\"\n            hidden\n            href=\"javascript:void 0\"\n            role=\"navigation\"></a>\n\n          ${!animateTitle ? titleTemplate : ''}\n\n          <div\n            class=${`${blockClass}__inner-content`}\n            ?no-title-animation=${!animateTitle}\n            ?has-actions=${this._actionsCount > 0}>\n            ${animateTitle ? titleTemplate : ''}\n            <div class=${`${blockClass}__body-content`}>\n              <slot></slot>\n            </div>\n\n            <cds-side-panel-button-set\n              class=${`${blockClass}__actions`}\n              ?hidden=${this._actionsCount === 0}\n              ?condensed=${condensedActions}\n              actions-multiple=${actionsMultiple}\n              size=${size}>\n              <slot\n                name=\"actions\"\n                @slotchange=${this._handleActionsChange}></slot>\n            </cds-side-panel-button-set>\n          </div>\n\n          <a\n            id=\"end-sentinel\"\n            class=\"sentinel\"\n            hidden\n            href=\"javascript:void 0\"\n            role=\"navigation\"></a>\n        </cds-layer>\n      </div>\n\n      ${includeOverlay\n        ? html`<div\n            ?slide-in=${slideIn}\n            class=${`${blockClass}__overlay`}\n            ?open=${this.open}\n            ?opening=${open && !this._isOpen}\n            ?closing=${!open && this._isOpen}\n            tabindex=\"-1\"\n            @click=${this._handleClickOnOverlay}></div>`\n        : ''}\n    `;\n  }\n\n  checkSetOpen = () => {\n    const { _sidePanel: sidePanel } = this;\n    if (sidePanel && this._isOpen) {\n      // wait until the side panel has transitioned off the screen to remove\n      sidePanel.addEventListener('transitionend', () => {\n        this._isOpen = false;\n      });\n    } else {\n      // allow the html to render before animating in the side panel\n      window.requestAnimationFrame(() => {\n        this._isOpen = this.open;\n      });\n    }\n  };\n\n  adjustPageContent = () => {\n    // sets/resets styles based on slideIn property and selectorPageContent;\n    if (this.selectorPageContent) {\n      const pageContentEl: HTMLElement | null = document.querySelector(\n        this.selectorPageContent\n      );\n\n      if (pageContentEl) {\n        const newValues = {\n          marginInlineStart: '',\n          marginInlineEnd: '',\n          inlineSize: '',\n          transition: this._reducedMotion.matches\n            ? 'none'\n            : `all ${moderate02}`,\n          transitionProperty: 'margin-inline-start, margin-inline-end',\n        };\n        if (this.open) {\n          newValues.inlineSize = 'auto';\n          if (this.placement === 'left') {\n            newValues.marginInlineStart = `${this._sidePanel.offsetWidth}px`;\n          } else {\n            newValues.marginInlineEnd = `${this._sidePanel.offsetWidth}px`;\n          }\n        }\n\n        Object.keys(newValues).forEach((key) => {\n          pageContentEl.style[key] = newValues[key];\n        });\n      }\n    }\n  };\n\n  firstUpdated() {\n    this.checkSetOpen();\n    this.adjustPageContent();\n    this._setMeasuredCustomProperties('first update');\n  }\n\n  async updated(changedProperties) {\n    this.checkSetOpen();\n\n    if (\n      changedProperties.has('slide-in') ||\n      changedProperties.has('open') ||\n      changedProperties.has('include-overlay')\n    ) {\n      this.adjustPageContent();\n    }\n    if (changedProperties.has('open')) {\n      this.disconnectObservers();\n      if (this.open) {\n        this.connectObservers();\n        this._setMeasuredCustomProperties('update');\n\n        this._launcher = this.ownerDocument!.activeElement;\n        const focusNode =\n          this.selectorInitialFocus &&\n          this.querySelector(this.selectorInitialFocus);\n\n        await (this.constructor as typeof CDSSidePanel)._delay();\n        if (focusNode) {\n          // For cases where a `carbon-web-components` component (e.g. `<cds-button>`) being `primaryFocusNode`,\n          // where its first update/render cycle that makes it focusable happens after `<cds-side-panel>`'s first update/render cycle\n          (focusNode as HTMLElement).focus();\n        } else if (\n          !tryFocusElems(\n            this.querySelectorAll(\n              (this.constructor as typeof CDSSidePanel).selectorTabbable\n            ),\n            true\n          )\n        ) {\n          this.focus();\n        }\n      } else if (\n        this._launcher &&\n        typeof (this._launcher as HTMLElement).focus === 'function'\n      ) {\n        (this._launcher as HTMLElement).focus();\n        this._launcher = null;\n      }\n\n      // monitor scroll\n      if (this._innerContent) {\n        this._innerContent.addEventListener('scroll', this._scrollObserver);\n      }\n    }\n  }\n\n  /**\n   * @param ms The number of milliseconds.\n   * @returns A promise that is resolves after the given milliseconds.\n   */\n  private static _delay(ms = 0) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, ms);\n    });\n  }\n\n  /**\n   * A selector selecting tabbable nodes.\n   */\n  static get selectorTabbable() {\n    return selectorTabbable;\n  }\n\n  /**\n   * The name of the custom event fired before this side-panel is being closed upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of closing this side-panel.\n   */\n  static get eventBeforeClose() {\n    return `${prefix}-side-panel-beingclosed`;\n  }\n\n  /**\n   * The name of the custom event fired after this side-panel is closed upon a user gesture.\n   */\n  static get eventClose() {\n    return `${prefix}-side-panel-closed`;\n  }\n\n  /**\n   * The name of the custom event fired on clicking the navigate back button\n   */\n  static get eventNavigateBack() {\n    return `${prefix}-side-panel-header-navigate-back`;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSSidePanel;\n"],"mappings":"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"}