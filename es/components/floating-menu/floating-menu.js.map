{"version":3,"file":"floating-menu.js","names":["LitElement","HostListener","FocusMixin","HostListenerMixin","FLOATING_MENU_DIRECTION","FLOATING_MENU_POSITION_DIRECTION","prefix","observeResize","observer","elem","observe","release","unobserve","closestComposed","selector","found","closest","host","getRootNode","CDSFloatingMenu","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","ResizeObserver","container","open","parent","position","direction","start","top","style","RTL","decorators","relatedTarget","contains","HTMLElement","prototype","focus","call","event","shiftKey","selectorContainer","ownerDocument","body","triggerPosition","TypeError","left","refLeft","refTop","right","refRight","bottom","refBottom","width","height","getBoundingClientRect","containerLeft","containerRight","containerTop","containerComputedStyle","defaultView","getComputedStyle","positionDirection","getPropertyValue","isRtl","containerStartFromViewport","innerWidth","refStartFromContainer","refEndFromContainer","refTopFromContainer","Error","flipped","Object","values","indexOf","alignmentStart","TOP","BOTTOM","disconnectedCallback","_hObserveResizeContainer","_hObserveResizeParent","updated","changedProperties","has","parentElement","appendChild","_this$parent","_resizeObserver","static","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/floating-menu/floating-menu.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement } from 'lit';\nimport HostListener from '../../globals/decorators/host-listener';\nimport FocusMixin from '../../globals/mixins/focus';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport Handle from '../../globals/internal/handle';\nimport {\n  FLOATING_MENU_DIRECTION,\n  FLOATING_MENU_POSITION_DIRECTION,\n} from './defs';\nimport CDSFloatingMenuTrigger from './floating-menu-trigger';\nimport { prefix } from '../../globals/settings';\n\nexport { FLOATING_MENU_DIRECTION, FLOATING_MENU_POSITION_DIRECTION };\n\n/**\n * Position of floating menu, or trigger button of floating menu.\n */\nexport interface FloatingMenuPosition {\n  /**\n   * The LTR/RTL direction used for positioning floating menu.\n   */\n  direction: FLOATING_MENU_POSITION_DIRECTION;\n\n  /**\n   * The start position (Left position for LTR, right position for RTL).\n   */\n  start: number;\n\n  /**\n   * The top position.\n   */\n  top: number;\n}\n\n/**\n * Observes resize of the given element with the given resize observer.\n *\n * @param observer The resize observer.\n * @param elem The element to observe the resize.\n */\nconst observeResize = (observer: ResizeObserver, elem: Element) => {\n  observer.observe(elem);\n  return {\n    release() {\n      observer.unobserve(elem);\n      return null;\n    },\n  } as Handle;\n};\n\n/**\n * @param elem The starting element.\n * @param selector The CSS selector.\n * @returns {Element}\n *   The closest ancestor node of the given element that matches the given selector, crossing Shadow DOM boundary.\n */\nconst closestComposed = (elem: Element, selector: string) => {\n  const found = elem.closest(selector);\n  if (found) {\n    return found;\n  }\n  const { host } = elem.getRootNode() as ShadowRoot;\n  if (host) {\n    return closestComposed(host, selector);\n  }\n  return null;\n};\n\n/**\n * Floating menu.\n */\nabstract class CDSFloatingMenu extends HostListenerMixin(\n  FocusMixin(LitElement)\n) {\n  /**\n   * The handle for observing resize of the element containing the trigger button.\n   */\n  private _hObserveResizeParent: Handle | null = null;\n\n  /**\n   * The handle for observing resize of the floating menu container.\n   */\n  private _hObserveResizeContainer: Handle | null = null;\n\n  /**\n   * The `ResizeObserver` instance for observing element resizes for re-positioning floating menu position.\n   */\n  // TODO: Wait for `.d.ts` update to support `ResizeObserver`\n  // @ts-ignore\n  private _resizeObserver = new ResizeObserver(() => {\n    const { container, open, parent, position } = this;\n    if (container && open && parent) {\n      const { direction, start, top } = position;\n      this.style[\n        direction !== FLOATING_MENU_POSITION_DIRECTION.RTL ? 'left' : 'right'\n      ] = `${start}px`;\n      this.style.top = `${top}px`;\n    }\n  });\n\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleBlur = ({ relatedTarget }: FocusEvent) => {\n    if (!this.contains(relatedTarget as Node)) {\n      const { parent } = this;\n      if (parent && parent !== relatedTarget) {\n        parent.open = false;\n        HTMLElement.prototype.focus.call(this.parent); // SVGElement in IE11 does not have `.focus()` method\n      }\n    }\n  };\n\n  @HostListener('click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _click = () => {\n    const { parent } = this;\n    if (parent) {\n      parent.open = false;\n    }\n  };\n\n  @HostListener('keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === 'Tab') {\n      if (event.shiftKey) {\n        const { parent } = this;\n        if (parent) {\n          parent.open = false;\n        }\n      }\n    }\n  };\n\n  /**\n   * The DOM element, typically a custom element in this library, launching this floating menu.\n   */\n  protected parent: CDSFloatingMenuTrigger | null = null;\n\n  /**\n   * The menu direction.\n   */\n  abstract direction: FLOATING_MENU_DIRECTION;\n\n  /**\n   * `true` if the menu should be open.\n   */\n  abstract open: boolean;\n\n  /**\n   * `true` if the menu alignment should be flipped.\n   */\n  abstract flipped: boolean;\n\n  /**\n   * The DOM element to put this menu into.\n   */\n  get container() {\n    return (\n      closestComposed(\n        this,\n        (this.constructor as typeof CDSFloatingMenu).selectorContainer\n      ) || this.ownerDocument!.body\n    );\n  }\n\n  /**\n   * The position of this floating menu.\n   */\n  get position(): FloatingMenuPosition {\n    const { triggerPosition } = this.parent!;\n    if (!triggerPosition) {\n      throw new TypeError('Missing information of trigger button position.');\n    }\n\n    const { container } = this;\n    const {\n      left: refLeft = 0,\n      top: refTop = 0,\n      right: refRight = 0,\n    } = triggerPosition;\n    let { bottom: refBottom = 0 } = triggerPosition;\n    const { width, height } = this.getBoundingClientRect();\n    const {\n      left: containerLeft = 0,\n      right: containerRight = 0,\n      top: containerTop = 0,\n    } = container.getBoundingClientRect();\n    refBottom = refBottom - containerTop;\n\n    const containerComputedStyle =\n      container.ownerDocument!.defaultView!.getComputedStyle(container);\n    const positionDirection = containerComputedStyle.getPropertyValue(\n      'direction'\n    ) as FLOATING_MENU_POSITION_DIRECTION;\n    const isRtl = positionDirection === FLOATING_MENU_POSITION_DIRECTION.RTL;\n    const containerStartFromViewport = !isRtl\n      ? containerLeft\n      : container.ownerDocument!.defaultView!.innerWidth - containerRight;\n    const refStartFromContainer = !isRtl\n      ? refLeft - containerLeft\n      : containerRight - refRight;\n    const refEndFromContainer = !isRtl\n      ? refRight - containerLeft\n      : containerRight - refLeft;\n    const refTopFromContainer = refTop - containerTop;\n\n    if (\n      (container !== this.ownerDocument!.body ||\n        containerStartFromViewport !== 0 ||\n        containerTop !== 0) &&\n      containerComputedStyle.getPropertyValue('position') === 'static'\n    ) {\n      throw new Error(\n        'Floating menu container must not have `position:static`.'\n      );\n    }\n\n    const { flipped, direction } = this;\n    if (Object.values(FLOATING_MENU_DIRECTION).indexOf(direction) < 0) {\n      throw new Error(`Wrong menu position direction: ${direction}`);\n    }\n\n    const alignmentStart = flipped\n      ? refEndFromContainer - width\n      : refStartFromContainer;\n\n    const { start, top } = {\n      [FLOATING_MENU_DIRECTION.TOP]: () => ({\n        start: alignmentStart,\n        top: refTopFromContainer - height,\n      }),\n      [FLOATING_MENU_DIRECTION.BOTTOM]: () => ({\n        start: alignmentStart,\n        top: refBottom,\n      }),\n    }[direction]();\n\n    return {\n      direction: positionDirection,\n      start,\n      top,\n    };\n  }\n\n  disconnectedCallback() {\n    if (this._hObserveResizeContainer) {\n      this._hObserveResizeContainer = this._hObserveResizeContainer.release();\n    }\n    if (this._hObserveResizeParent) {\n      this._hObserveResizeParent = this._hObserveResizeParent.release();\n    }\n  }\n\n  updated(changedProperties) {\n    const { container, open, parent } = this;\n    if (\n      (changedProperties.has('flipped') ||\n        changedProperties.has('direction') ||\n        changedProperties.has('open')) &&\n      open\n    ) {\n      if (!parent) {\n        this.parent = this.parentElement as CDSFloatingMenuTrigger;\n        container.appendChild(this);\n      }\n      // Note: `this.position` cannot be referenced until `this.parent` is set\n      const { direction, start, top } = this.position;\n      this.style[\n        direction !== FLOATING_MENU_POSITION_DIRECTION.RTL ? 'left' : 'right'\n      ] = `${start}px`;\n      this.style.top = `${top}px`;\n    }\n    if (changedProperties.has('open')) {\n      if (this._hObserveResizeContainer) {\n        this._hObserveResizeContainer = this._hObserveResizeContainer.release();\n      }\n      if (this._hObserveResizeParent) {\n        this._hObserveResizeParent = this._hObserveResizeParent.release();\n      }\n      if (open) {\n        const { parentElement } = this.parent ?? {};\n        this._hObserveResizeContainer = observeResize(\n          this._resizeObserver,\n          container\n        );\n        if (parentElement) {\n          this._hObserveResizeParent = observeResize(\n            this._resizeObserver,\n            parentElement\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * A constant indicating that this class is a floating menu.\n   */\n  static FLOATING_MENU = true;\n\n  /**\n   * The CSS selector to find the element to put this floating menu in.\n   */\n  static get selectorContainer() {\n    return `[data-floating-menu-container],${prefix}-modal`;\n  }\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n}\n\nexport default CDSFloatingMenu;\n"],"mappings":"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"}