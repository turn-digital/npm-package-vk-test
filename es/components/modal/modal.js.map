{"version":3,"file":"modal.js","names":["classMap","LitElement","html","property","query","prefix","HostListener","HostListenerMixin","MODAL_SIZE","styles","selectorTabbable","carbonElement","customElement","PRECEDING","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","FOLLOWING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","tryFocusElems","elems","reverse","i","length","elem","focus","ownerDocument","activeElement","CDSModal","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","decorators","event","composedPath","indexOf","shadowRoot","preventCloseOnClickOutside","_handleUserInitiatedClose","target","relatedTarget","_this$shadowRoot","open","_startSentinelNode","startSentinelNode","_endSentinelNode","endSentinelNode","oldContains","contains","currentContains","selectorTabbableForModal","comparisonResult","compareDocumentPosition","_delay","querySelectorAll","_handleClickContainer","matches","selectorCloseButton","preventClose","triggeredBy","init","bubbles","cancelable","composed","detail","dispatchEvent","CustomEvent","eventBeforeClose","eventClose","type","Boolean","reflect","attribute","MEDIUM","firstUpdated","body","querySelector","selectorModalBody","bodyElement","document","createElement","appendChild","render","alert","ariaLabel","size","hasScrollingContent","containerClass","split","filter","reduce","acc","item","_objectSpread","containerClasses","_t","_","_t2","updated","changedProperties","has","_launcher","primaryFocusNode","selectorPrimaryFocus","static","ms","Promise","resolve","setTimeout"],"sources":["components/modal/modal.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2023\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport { MODAL_SIZE } from './defs';\nimport styles from './modal.scss';\nimport { selectorTabbable } from '../../globals/settings';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport { MODAL_SIZE };\n\n// eslint-disable-next-line no-bitwise\nconst PRECEDING =\n  Node.DOCUMENT_POSITION_PRECEDING | Node.DOCUMENT_POSITION_CONTAINS;\n// eslint-disable-next-line no-bitwise\nconst FOLLOWING =\n  Node.DOCUMENT_POSITION_FOLLOWING | Node.DOCUMENT_POSITION_CONTAINED_BY;\n\n/**\n * Tries to focus on the given elements and bails out if one of them is successful.\n *\n * @param elems The elements.\n * @param reverse `true` to go through the list in reverse order.\n * @returns `true` if one of the attempts is successful, `false` otherwise.\n */\nfunction tryFocusElems(elems: NodeListOf<HTMLElement>, reverse = false) {\n  if (!reverse) {\n    for (let i = 0; i < elems.length; ++i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  } else {\n    for (let i = elems.length - 1; i >= 0; --i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Modal.\n *\n * @element cds-modal\n * @csspart dialog The dialog.\n * @fires cds-modal-beingclosed\n *   The custom event fired before this modal is being closed upon a user gesture.\n *   Cancellation of this event stops the user-initiated action of closing this modal.\n * @fires cds-modal-closed - The custom event fired after this modal is closed upon a user gesture.\n */\n@customElement(`${prefix}-modal`)\nclass CDSModal extends HostListenerMixin(LitElement) {\n  /**\n   * The element that had focus before this modal gets open.\n   */\n  private _launcher: Element | null = null;\n\n  /**\n   * Node to track focus going outside of modal content.\n   */\n  @query('#start-sentinel')\n  private _startSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Node to track focus going outside of modal content.\n   */\n  @query('#end-sentinel')\n  private _endSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Handles `click` event on this element.\n   *\n   * @param event The event.\n   */\n  @HostListener('click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = (event: MouseEvent) => {\n    if (\n      event.composedPath().indexOf(this.shadowRoot!) < 0 &&\n      !this.preventCloseOnClickOutside\n    ) {\n      this._handleUserInitiatedClose(event.target);\n    }\n  };\n\n  /**\n   * Handles `blur` event on this element.\n   *\n   * @param event The event.\n   * @param event.target The event target.\n   * @param event.relatedTarget The event relatedTarget.\n   */\n  @HostListener('shadowRoot:focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleBlur = async ({ target, relatedTarget }: FocusEvent) => {\n    const {\n      open,\n      _startSentinelNode: startSentinelNode,\n      _endSentinelNode: endSentinelNode,\n    } = this;\n    const oldContains = target !== this && this.contains(target as Node);\n    const currentContains =\n      relatedTarget !== this &&\n      (this.contains(relatedTarget as Node) ||\n        (this.shadowRoot?.contains(relatedTarget as Node) &&\n          relatedTarget !== (endSentinelNode as Node)));\n\n    // Performs focus wrapping if _all_ of the following is met:\n    // * This modal is open\n    // * The viewport still has focus\n    // * Modal body used to have focus but no longer has focus\n    const { selectorTabbable: selectorTabbableForModal } = this\n      .constructor as typeof CDSModal;\n    if (open && relatedTarget && oldContains && !currentContains) {\n      const comparisonResult = (target as Node).compareDocumentPosition(\n        relatedTarget as Node\n      );\n      // eslint-disable-next-line no-bitwise\n      if (relatedTarget === startSentinelNode || comparisonResult & PRECEDING) {\n        await (this.constructor as typeof CDSModal)._delay();\n        if (\n          !tryFocusElems(\n            this.querySelectorAll(selectorTabbableForModal),\n            true\n          ) &&\n          relatedTarget !== this\n        ) {\n          this.focus();\n        }\n      }\n      // eslint-disable-next-line no-bitwise\n      else if (\n        relatedTarget === endSentinelNode ||\n        comparisonResult & FOLLOWING\n      ) {\n        await (this.constructor as typeof CDSModal)._delay();\n        if (!tryFocusElems(this.querySelectorAll(selectorTabbableForModal))) {\n          this.focus();\n        }\n      }\n    }\n  };\n\n  @HostListener('document:keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeydown = ({ key, target }: KeyboardEvent) => {\n    if (key === 'Esc' || key === 'Escape') {\n      this._handleUserInitiatedClose(target);\n    }\n  };\n\n  /**\n   * Handles `click` event on the modal container.\n   *\n   * @param event The event.\n   */\n  private _handleClickContainer(event: MouseEvent) {\n    if (\n      (event.target as Element).matches(\n        (this.constructor as typeof CDSModal).selectorCloseButton\n      ) &&\n      !this.preventClose\n    ) {\n      this._handleUserInitiatedClose(event.target);\n    }\n  }\n\n  /**\n   * Handles user-initiated close request of this modal.\n   *\n   * @param triggeredBy The element that triggered this close request.\n   */\n  private _handleUserInitiatedClose(triggeredBy: EventTarget | null) {\n    if (this.open) {\n      const init = {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: {\n          triggeredBy,\n        },\n      };\n      if (\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSModal).eventBeforeClose,\n            init\n          )\n        )\n      ) {\n        this.open = false;\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSModal).eventClose,\n            init\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   * Specify whether the Modal is displaying an alert, error or warning.\n   * Should go hand in hand with the danger prop.\n   */\n  @property({ type: Boolean, reflect: true })\n  alert = false;\n\n  /**\n   * Specify text for the accessibility label of the header\n   */\n  @property({ attribute: 'aria-label' })\n  ariaLabel = '';\n\n  /**\n   * The additional CSS class names for the container <div> of the element.\n   */\n  @property({ attribute: 'container-class' })\n  containerClass = '';\n\n  /**\n   * Specify whether or not the Modal content should have any inner padding.\n   */\n  @property({ type: Boolean, reflect: true, attribute: 'full-width' })\n  fullWidth = false;\n\n  /**\n   * Specify whether the modal contains scrolling content\n   */\n  @property({\n    type: Boolean,\n    reflect: true,\n    attribute: 'has-scrolling-content',\n  })\n  hasScrollingContent = false;\n\n  /**\n   * `true` if the modal should be open.\n   */\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * Modal size.\n   */\n  @property({ reflect: true })\n  size = MODAL_SIZE.MEDIUM;\n\n  /**\n   * Prevent closing on click outside of modal\n   */\n  @property({ type: Boolean, attribute: 'prevent-close-on-click-outside' })\n  preventCloseOnClickOutside = false;\n\n  /**\n   * Prevent the modal from closing after clicking the close button\n   */\n  @property({ type: Boolean, attribute: 'prevent-close' })\n  preventClose = false;\n\n  firstUpdated() {\n    const body = this.querySelector(\n      (this.constructor as typeof CDSModal).selectorModalBody\n    );\n\n    if (!body) {\n      const bodyElement = document.createElement(\n        (this.constructor as typeof CDSModal).selectorModalBody\n      );\n      this.appendChild(bodyElement);\n    }\n  }\n\n  render() {\n    const { alert, ariaLabel, size, hasScrollingContent } = this;\n    const containerClass = this.containerClass\n      .split(' ')\n      .filter(Boolean)\n      .reduce((acc, item) => ({ ...acc, [item]: true }), {});\n    const containerClasses = classMap({\n      [`${prefix}--modal-container`]: true,\n      [`${prefix}--modal-container--${size}`]: size,\n      ...containerClass,\n    });\n    return html`\n      <a\n        id=\"start-sentinel\"\n        class=\"${prefix}--visually-hidden\"\n        href=\"javascript:void 0\"\n        role=\"navigation\"></a>\n      <div\n        aria-label=${ariaLabel}\n        part=\"dialog\"\n        class=${containerClasses}\n        role=\"${alert ? 'alert' : 'dialog'}\"\n        tabindex=\"-1\"\n        @click=${this._handleClickContainer}>\n        <slot></slot>\n        ${hasScrollingContent\n          ? html` <div class=\"cds--modal-content--overflow-indicator\"></div> `\n          : ``}\n      </div>\n      <a\n        id=\"end-sentinel\"\n        class=\"${prefix}--visually-hidden\"\n        href=\"javascript:void 0\"\n        role=\"navigation\"></a>\n    `;\n  }\n\n  async updated(changedProperties) {\n    if (changedProperties.has('open')) {\n      if (this.open) {\n        this._launcher = this.ownerDocument!.activeElement;\n        const primaryFocusNode = this.querySelector(\n          (this.constructor as typeof CDSModal).selectorPrimaryFocus\n        );\n        await (this.constructor as typeof CDSModal)._delay();\n        if (primaryFocusNode) {\n          // For cases where a `carbon-web-components` component (e.g. `<cds-button>`) being `primaryFocusNode`,\n          // where its first update/render cycle that makes it focusable happens after `<cds-modal>`'s first update/render cycle\n          (primaryFocusNode as HTMLElement).focus();\n        } else if (\n          !tryFocusElems(\n            this.querySelectorAll(\n              (this.constructor as typeof CDSModal).selectorTabbable\n            ),\n            true\n          )\n        ) {\n          this.focus();\n        }\n      } else if (\n        this._launcher &&\n        typeof (this._launcher as HTMLElement).focus === 'function'\n      ) {\n        (this._launcher as HTMLElement).focus();\n        this._launcher = null;\n      }\n    }\n  }\n\n  /**\n   * @param ms The number of milliseconds.\n   * @returns A promise that is resolves after the given milliseconds.\n   */\n  private static _delay(ms = 0) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, ms);\n    });\n  }\n\n  /**\n   * A selector selecting buttons that should close this modal.\n   */\n  static get selectorCloseButton() {\n    return `[data-modal-close],${prefix}-modal-close-button`;\n  }\n\n  /**\n   * A selector selecting tabbable nodes.\n   */\n  static get selectorTabbable() {\n    return selectorTabbable;\n  }\n\n  /**\n   * A selector selecting the nodes that should be focused when modal gets open.\n   */\n  static get selectorPrimaryFocus() {\n    return `[data-modal-primary-focus],${prefix}-modal-footer ${prefix}-button[kind=\"primary\"]`;\n  }\n\n  /**\n   * A selector selecting the modal body component\n   */\n  static get selectorModalBody() {\n    return `${prefix}-modal-body`;\n  }\n\n  /**\n   * The name of the custom event fired before this modal is being closed upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of closing this modal.\n   */\n  static get eventBeforeClose() {\n    return `${prefix}-modal-beingclosed`;\n  }\n\n  /**\n   * The name of the custom event fired after this modal is closed upon a user gesture.\n   */\n  static get eventClose() {\n    return `${prefix}-modal-closed`;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSModal;\n"],"mappings":"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"}