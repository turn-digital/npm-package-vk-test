{"version":3,"file":"host-listener.js","names":["setHostListener","type","options","Clazz","name","hostListeners","_hostListeners","Error","HostListenerStandard","descriptor","kind","key","placement","_objectSpread","finisher","HostListener","targetOrDescriptor","constructor"],"sources":["globals/decorators/host-listener.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * Puts an event listener to an internal table for `@HostListener()`.\n *\n * @param type\n *   The event type. Can be prefixed with `document:` or `window:`.\n *   The event listener is attached to host element's owner document or its default view in such case.\n * @param options The event listener options.\n * @param Clazz The target class.\n * @param name The method name in the given target class that works as the event listener.\n */\nconst setHostListener = (\n  type: string,\n  options: boolean | AddEventListenerOptions,\n  Clazz,\n  name: string\n) => {\n  const hostListeners = Clazz._hostListeners;\n  if (!hostListeners) {\n    throw new Error(\n      'The method `@HostListener()` is defined on has to be of a class that has `HostListerMixin`.'\n    );\n  }\n  if (!hostListeners[name]) {\n    hostListeners[name] = {};\n  }\n  hostListeners[name][type] = { options };\n};\n\n/**\n * @param type\n *   The event type. Can be prefixed with `document:` or `window:`.\n *   The event listener is attached to host element's owner document or its default view in such case.\n * @param options The event listener options.\n * @param descriptor The original class element descriptor of the event listener method.\n * @returns The updated class element descriptor with `@HostListener()` decorator.\n */\nconst HostListenerStandard = (\n  type: string,\n  options: boolean | AddEventListenerOptions,\n  descriptor\n) => {\n  const { kind, key, placement } = descriptor;\n  if (\n    !(\n      (kind === 'method' && placement === 'prototype') ||\n      (kind === 'field' && placement === 'own')\n    )\n  ) {\n    throw new Error(\n      '`@HostListener()` must be defined on instance methods, but you may have defined it on static, field, etc.'\n    );\n  }\n  return {\n    ...descriptor,\n    finisher(Clazz) {\n      setHostListener(type, options, Clazz, key);\n    },\n  };\n};\n\n/**\n * A decorator to add event listener to the host element, or its `document`/`window`, of a custom element.\n * The `target` must extend `HostListenerMixin`.\n *\n * @param type\n *   The event type. Can be prefixed with `document:` or `window:`.\n *   The event listener is attached to host element's owner document or its default view in such case.\n * @param options The event listener options.\n */\nconst HostListener =\n  (type: string, options?: boolean | AddEventListenerOptions) =>\n  (targetOrDescriptor, name: string) =>\n    typeof name !== 'undefined'\n      ? setHostListener(type, options!, targetOrDescriptor.constructor, name)\n      : HostListenerStandard(type, options!, targetOrDescriptor);\n\nexport default HostListener;\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,eAAe,GAAGA,CACtBC,IAAY,EACZC,OAA0C,EAC1CC,KAAK,EACLC,IAAY,KACT;EACH,MAAMC,aAAa,GAAGF,KAAK,CAACG,cAAc;EAC1C,IAAI,CAACD,aAAa,EAAE;IAClB,MAAM,IAAIE,KAAK,CACb,6FACF,CAAC;EACH;EACA,IAAI,CAACF,aAAa,CAACD,IAAI,CAAC,EAAE;IACxBC,aAAa,CAACD,IAAI,CAAC,GAAG,CAAC,CAAC;EAC1B;EACAC,aAAa,CAACD,IAAI,CAAC,CAACH,IAAI,CAAC,GAAG;IAAEC;EAAQ,CAAC;AACzC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMM,oBAAoB,GAAGA,CAC3BP,IAAY,EACZC,OAA0C,EAC1CO,UAAU,KACP;EACH,MAAM;IAAEC,IAAI;IAAEC,GAAG;IAAEC;EAAU,CAAC,GAAGH,UAAU;EAC3C,IACE,EACGC,IAAI,KAAK,QAAQ,IAAIE,SAAS,KAAK,WAAW,IAC9CF,IAAI,KAAK,OAAO,IAAIE,SAAS,KAAK,KAAM,CAC1C,EACD;IACA,MAAM,IAAIL,KAAK,CACb,2GACF,CAAC;EACH;EACA,OAAAM,aAAA,CAAAA,aAAA,KACKJ,UAAU;IACbK,QAAQA,CAACX,KAAK,EAAE;MACdH,eAAe,CAACC,IAAI,EAAEC,OAAO,EAAEC,KAAK,EAAEQ,GAAG,CAAC;IAC5C;EAAC;AAEL,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMI,YAAY,GAChBA,CAACd,IAAY,EAAEC,OAA2C,KAC1D,CAACc,kBAAkB,EAAEZ,IAAY,KAC/B,OAAOA,IAAI,KAAK,WAAW,GACvBJ,eAAe,CAACC,IAAI,EAAEC,OAAO,EAAGc,kBAAkB,CAACC,WAAW,EAAEb,IAAI,CAAC,GACrEI,oBAAoB,CAACP,IAAI,EAAEC,OAAO,EAAGc,kBAAkB,CAAC;AAEhE,eAAeD,YAAY"}